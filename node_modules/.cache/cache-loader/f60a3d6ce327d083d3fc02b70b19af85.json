{"remainingRequest":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\node_modules\\eslint-loader\\index.js??ref--18-0!C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\src\\main.js","dependencies":[{"path":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\src\\main.js","mtime":1524146747428},{"path":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\package.json","mtime":1523642910731},{"path":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1520545180302},{"path":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\node_modules\\babel-loader\\lib\\index.js","mtime":1519636541000},{"path":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\node_modules\\eslint-loader\\index.js","mtime":1519638534000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport Vue from 'vue/dist/vue.js';\nimport app from './app.vue';\nimport BootstrapVue from 'bootstrap-vue';\nimport VueRouter from 'vue-router';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.css';\nimport Vuex from 'vuex';\nimport createPersistedState from 'vuex-persistedstate';\nimport router from './router';\nimport { getAll, createTimeline as _createTimeline, deleteTimeline as _deleteTimeline, changeTimelineTitle as _changeTimelineTitle, createEvent, linkEventToTimeline, unlinkEventFromEvent, linkEventToEvent, deleteEvent as _deleteEvent, changeEventTitle as _changeEventTitle, unlinkEventFromTimeline, changeEventDescription as _changeEventDescription, createAttachment as _createAttachment, deleteAttachment as _deleteAttachment, generateUploadURL, generateGetURL, uploadAttachment, downloadAttachment } from './scripts/api';\nimport FileSaver from 'file-saver';\nVue.use(BootstrapVue);\nVue.use(VueRouter);\nVue.use(Vuex);\nVue.config.productionTip = false;\nvar timelines = [];\nvar store = new Vuex.Store({\n  state: {\n    timelines: timelines,\n    currentTimeline: null,\n    currentEvent: null,\n    searchValue: ''\n  },\n  mutations: {\n    search: function search(state, value) {\n      state.searchValue = value;\n    },\n    addTimeline: function addTimeline(state, timeline) {\n      state.timelines.push(timeline);\n    },\n    addEvent: function addEvent(state, event) {\n      state.currentTimeline.timelineEvents.push(event);\n    },\n    removeTimeline: function removeTimeline(state, id) {\n      for (var i = 0; i < state.timelines.length; i++) {\n        if (state.timelines[i].id === id) {\n          state.timelines.splice(i, 1);\n          if (state.currentTimeline != null) if (state.currentTimeline.id === id) state.currentTimeline = null;\n          return;\n        }\n      }\n    },\n    setCurrentTimeline: function setCurrentTimeline(state, timeline) {\n      state.currentTimeline = timeline;\n    },\n    clearCurrentTimeline: function clearCurrentTimeline(state) {\n      state.currentTimeline = null;\n    },\n    setCurrentEvent: function setCurrentEvent(state, event) {\n      state.currentEvent = event;\n    },\n    clearCurrentEvent: function clearCurrentEvent(state) {\n      state.currentEvent = null;\n    },\n    updateTimelineTitle: function updateTimelineTitle(state, payload) {\n      for (var i = 0; i < state.timelines.length; i++) {\n        if (state.timelines[i].id === payload.id) {\n          state.timelines[i].title = payload.title;\n\n          if (payload.id === state.currentTimeline.id) {\n            state.currentTimeline.title = payload.title;\n          }\n\n          return;\n        }\n      }\n    },\n    removeEvent: function removeEvent(state, id) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === id) {\n          state.currentTimeline.timelineEvents.splice(i, 1);\n          if (state.currentEvent != null) if (state.currentEvent.Id === id) state.currentEvent = null;\n          return;\n        }\n      }\n    },\n    updateEventTitle: function updateEventTitle(state, payload) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === payload.id) {\n          state.currentTimeline.timelineEvents[i].Title = payload.title;\n\n          if (payload.id === state.currentEvent.Id) {\n            state.currentEvent.Title = payload.title;\n          }\n\n          return;\n        }\n      }\n    },\n    updateEventDescription: function updateEventDescription(state, payload) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === payload.id) {\n          state.currentTimeline.timelineEvents[i].Description = payload.description;\n\n          if (payload.id === state.currentEvent.Id) {\n            state.currentEvent.Description = payload.description;\n          }\n\n          return;\n        }\n      }\n    },\n    addAttachment: function addAttachment(state, attachment) {\n      state.currentEvent.Attachments.push(attachment);\n    },\n    removeAttachment: function removeAttachment(state, id) {\n      for (var i = 0; i < state.currentEvent.Attachments.length; i++) {\n        if (state.currentEvent.Attachments[i].Id === id) {\n          state.currentEvent.Attachments.splice(i, 1);\n          return;\n        }\n      }\n    }\n  },\n  actions: {\n    createTimeline: function createTimeline(_ref, title) {\n      var commit = _ref.commit;\n      return new Promise(function (resolve) {\n        _createTimeline(title).then(function (response) {\n          var item = response.data;\n          var timeline = {\n            title: item.Title,\n            date: item.CreationTimeStamp,\n            isDeleted: item.IsDeleted,\n            id: item.Id,\n            selected: false,\n            _rowVariant: ''\n          };\n          timeline.timelineEvents = [];\n          commit('addTimeline', timeline);\n          resolve(timeline);\n        });\n      });\n    },\n    deleteTimeline: function deleteTimeline(_ref2, id) {\n      var commit = _ref2.commit;\n\n      _deleteTimeline(id).then(function () {\n        commit('removeTimeline', id);\n      });\n    },\n    deleteSelectedTimelines: function deleteSelectedTimelines(_ref3) {\n      var state = _ref3.state;\n\n      /*\n        Filter returns an array of all selected timelines.\n        Foreach loops through that returned array,\n        using 'e' as the current timline.\n        Dispatch calls deleteTimeline action.\n        This at the end allows the use of this inside the forEach function.\n      */\n      state.timelines.filter(function (t) {\n        return t.selected;\n      }).forEach(function (e) {\n        this.dispatch('deleteTimeline', e.id);\n      }, this);\n    },\n    changeTimelineTitle: function changeTimelineTitle(_ref4, payload) {\n      var commit = _ref4.commit;\n      var id = payload.id;\n      var title = payload.title;\n\n      _changeTimelineTitle(id, title).then(function () {\n        commit('updateTimelineTitle', {\n          id: id,\n          title: title\n        });\n      });\n    },\n    createEventExact: function createEventExact(_ref5, payload) {\n      var state = _ref5.state,\n          commit = _ref5.commit;\n      var newEvent = {};\n      createEvent(payload).then(function (response) {\n        newEvent = response.data;\n        newEvent.LinkedTimelineEventIds = [];\n        linkEventToTimeline(newEvent.Id, state.currentTimeline.id).then(function () {\n          commit('addEvent', newEvent);\n        });\n      });\n    },\n    createEventBA: function createEventBA(_ref6, payload) {\n      var state = _ref6.state,\n          commit = _ref6.commit;\n      var newEvent = {};\n      createEvent(payload).then(function (response) {\n        newEvent = response.data;\n        linkEventToTimeline(newEvent.Id, state.currentTimeline.id).then(function () {\n          if (payload.beforeAfter === 'before') {\n            /*\n              Create a new timeline, create Event 1 at 12:00.\n              Create Event 2 set as before Event 1.\n              Now if you create Event 3 and also set this as before Event 1,\n              this will find that Event 2 already has a link to Event 1.\n              Replaces Event 2's link to Event 1 with a link to Event 3.\n              Links Event 3 to Event 1.\n              index would be the index of Event 2 in that example\n            */\n            var index = state.currentTimeline.timelineEvents.map(function (e) {\n              if (e.LinkedTimelineEventIds != null) if (e.LinkedTimelineEventIds[0] != null) return e.LinkedTimelineEventIds[0];\n            }).indexOf(payload.eventId);\n\n            if (index != -1) {\n              unlinkEventFromEvent(state.currentTimeline.timelineEvents[index].Id, payload.eventId);\n              linkEventToEvent(state.currentTimeline.timelineEvents[index].Id, newEvent.Id);\n              state.currentTimeline.timelineEvents[index].LinkedTimelineEventIds[0] = newEvent.Id;\n            }\n\n            linkEventToEvent(newEvent.Id, payload.eventId).then(function () {\n              newEvent.LinkedTimelineEventIds = [];\n              newEvent.LinkedTimelineEventIds.push(payload.eventId);\n              commit('addEvent', newEvent);\n            });\n          } else if (payload.beforeAfter === 'after') {\n            var _index = state.currentTimeline.timelineEvents.map(function (e) {\n              return e.Id;\n            }).indexOf(payload.eventId);\n\n            var item = state.currentTimeline.timelineEvents[_index];\n\n            if (item.LinkedTimelineEventIds != null) {\n              if (item.LinkedTimelineEventIds[0] != null) {\n                linkEventToEvent(newEvent.Id, item.LinkedTimelineEventIds[0]);\n                unlinkEventFromEvent(item.Id, item.LinkedTimelineEventIds[0]);\n                newEvent.LinkedTimelineEventIds = [];\n                newEvent.LinkedTimelineEventIds.push(item.LinkedTimelineEventIds[0]);\n              }\n            }\n\n            linkEventToEvent(item.Id, newEvent.Id).then(function () {\n              item.LinkedTimelineEventIds = [];\n              item.LinkedTimelineEventIds.push(newEvent.Id);\n              commit('addEvent', newEvent);\n            });\n          }\n        });\n      });\n    },\n    deleteEvent: function deleteEvent(_ref7, id) {\n      var state = _ref7.state,\n          commit = _ref7.commit;\n      var eventBeforeIndex = state.currentTimeline.timelineEvents.map(function (e) {\n        if (e.LinkedTimelineEventIds != null) if (e.LinkedTimelineEventIds[0] != null) return e.LinkedTimelineEventIds[0];\n      }).indexOf(id);\n      var ev = state.currentTimeline.timelineEvents.filter(function (e) {\n        return e.Id === id;\n      })[0];\n      var eventAfterId = '';\n\n      if (ev.LinkedTimelineEventIds != null) {\n        if (ev.LinkedTimelineEventIds[0] != null) {\n          eventAfterId = ev.LinkedTimelineEventIds[0];\n        }\n      }\n\n      if (eventBeforeIndex != -1) {\n        unlinkEventFromEvent(state.currentTimeline.timelineEvents[eventBeforeIndex].Id, id).then(function () {\n          if (eventAfterId != '') {\n            linkEventToEvent(state.currentTimeline.timelineEvents[eventBeforeIndex].Id, eventAfterId);\n            state.currentTimeline.timelineEvents[eventBeforeIndex].LinkedTimelineEventIds[0] = eventAfterId;\n          } else {\n            state.currentTimeline.timelineEvents[eventBeforeIndex].LinkedTimelineEventIds[0].slice(0, 1);\n          }\n        });\n      }\n\n      _deleteEvent(id).then(function () {\n        unlinkEventFromTimeline(id, state.currentTimeline.id).then(function () {\n          commit('removeEvent', id);\n        });\n      });\n    },\n    changeEventTitle: function changeEventTitle(_ref8, payload) {\n      var commit = _ref8.commit;\n      var id = payload.id;\n      var title = payload.title;\n\n      _changeEventTitle(id, title).then(function () {\n        commit('updateEventTitle', {\n          id: id,\n          title: title\n        });\n      });\n    },\n    changeEventDescription: function changeEventDescription(_ref9, payload) {\n      var commit = _ref9.commit;\n      var id = payload.id;\n      var description = payload.description;\n\n      _changeEventDescription(id, description).then(function () {\n        commit('updateEventDescription', {\n          id: id,\n          description: description\n        });\n      });\n    },\n    createAttachment: function createAttachment(_ref10, payload) {\n      var state = _ref10.state,\n          commit = _ref10.commit;\n      var newAttachment = {};\n\n      _createAttachment({\n        title: payload.name,\n        eventId: state.currentEvent.Id\n      }).then(function (response) {\n        newAttachment = response.data;\n        generateUploadURL(newAttachment.Id).then(function (response) {\n          uploadAttachment({\n            file: payload,\n            url: response.data\n          }).then(function () {\n            commit('addAttachment', newAttachment);\n          });\n        });\n      });\n    },\n    deleteAttachment: function deleteAttachment(_ref11, id) {\n      var commit = _ref11.commit;\n\n      _deleteAttachment(id).then(function () {\n        commit('removeAttachment', id);\n      });\n    },\n    getAttachment: function getAttachment(_ref12, id) {\n      var state = _ref12.state;\n      generateGetURL(id).then(function (response) {\n        var url = response.data;\n        var filename = state.currentEvent.Attachments.filter(function (attachment) {\n          return attachment.Id === id;\n        })[0].Title;\n        downloadAttachment(filename, url).then(function (response) {\n          FileSaver.saveAs(response);\n        });\n      });\n    }\n  },\n  getters: {\n    selectedTimelines: function selectedTimelines(state) {\n      return state.timelines.filter(function (t) {\n        return t.selected;\n      });\n    }\n  },\n  plugins: [createPersistedState({\n    paths: ['currentTimeline', 'currentEvent']\n  })]\n});\nnew Vue({\n  render: function render(h) {\n    return h(app);\n  },\n  router: router,\n  store: store,\n  methods: {\n    fetchTimelines: function fetchTimelines() {\n      var _this = this;\n\n      timelines.splice(0, timelines.length);\n      var get = getAll();\n      get.then(function (data) {\n        for (var i = 0; i < data.data.Timelines.length; i++) {\n          var item = data.data.Timelines[i];\n          var timeline = {\n            title: item.Title,\n            date: item.CreationTimeStamp,\n            isDeleted: item.isDeleted,\n            id: item.Id,\n            timelineEvents: item.TimelineEvents,\n            selected: false,\n            _rowVariant: ''\n          };\n          timelines.push(timeline);\n        }\n\n        _this.updateCurrentTimeline();\n\n        _this.updateCurrentEvent();\n      });\n    },\n    updateCurrentTimeline: function updateCurrentTimeline() {\n      if (this.$store.state.currentTimeline === null) return;\n      if (this.$store.state.timelines === null) return;\n      if (this.$store.state.timelines[0] === null) return;\n      var index = this.$store.state.timelines.map(function (e) {\n        return e.id;\n      }).indexOf(this.$store.state.currentTimeline.id);\n\n      if (index === -1) {\n        this.$store.commit('clearCurrentTimeline');\n      } else {\n        this.$store.commit('setCurrentTimeline', this.$store.state.timelines[index]);\n      }\n    },\n    updateCurrentEvent: function updateCurrentEvent() {\n      if (this.$store.state.currentEvent === null) return;\n      if (this.$store.state.currentTimeline === null) return;\n      if (this.$store.state.currentTimeline.timelineEvents === null) return;\n      if (this.$store.state.currentTimeline.timelineEvents[0] === null) return;\n      var index = this.$store.state.currentTimeline.timelineEvents.map(function (e) {\n        return e.Id;\n      }).indexOf(this.$store.state.currentEvent.Id);\n\n      if (index === -1) {\n        this.$store.commit('clearCurrentEvent');\n      } else {\n        this.$store.commit('setCurrentEvent', this.$store.state.currentTimeline.timelineEvents[index]);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.fetchTimelines();\n  }\n}).$mount('#app');",{"version":3,"sources":["src\\main.js"],"names":["Vue","app","BootstrapVue","VueRouter","Vuex","createPersistedState","router","getAll","createTimeline","deleteTimeline","changeTimelineTitle","createEvent","linkEventToTimeline","unlinkEventFromEvent","linkEventToEvent","deleteEvent","changeEventTitle","unlinkEventFromTimeline","changeEventDescription","createAttachment","deleteAttachment","generateUploadURL","generateGetURL","uploadAttachment","downloadAttachment","FileSaver","use","config","productionTip","timelines","store","Store","state","currentTimeline","currentEvent","searchValue","mutations","search","value","addTimeline","timeline","push","addEvent","event","timelineEvents","removeTimeline","id","i","length","splice","setCurrentTimeline","clearCurrentTimeline","setCurrentEvent","clearCurrentEvent","updateTimelineTitle","payload","title","removeEvent","Id","updateEventTitle","Title","updateEventDescription","Description","description","addAttachment","attachment","Attachments","removeAttachment","actions","commit","Promise","resolve","then","item","response","data","date","CreationTimeStamp","isDeleted","IsDeleted","selected","_rowVariant","deleteSelectedTimelines","filter","t","forEach","e","dispatch","createEventExact","newEvent","LinkedTimelineEventIds","createEventBA","beforeAfter","index","map","indexOf","eventId","eventBeforeIndex","ev","eventAfterId","slice","newAttachment","name","file","url","getAttachment","filename","saveAs","getters","selectedTimelines","plugins","paths","render","h","methods","fetchTimelines","get","Timelines","TimelineEvents","updateCurrentTimeline","updateCurrentEvent","$store","mounted","$mount"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,kCAAP;AACA,OAAO,sCAAP;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,oBAAP,MAAiC,qBAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAAQC,MAAR,EACEC,iCADF,EACkBC,iCADlB,EACkCC,2CADlC,EAEEC,WAFF,EAEeC,mBAFf,EAEoCC,oBAFpC,EAE0DC,gBAF1D,EAE4EC,2BAF5E,EAEyFC,qCAFzF,EAE2GC,uBAF3G,EAEoIC,iDAFpI,EAGEC,qCAHF,EAGoBC,qCAHpB,EAIEC,iBAJF,EAIqBC,cAJrB,EAIqCC,gBAJrC,EAIuDC,kBAJvD,QAKO,eALP;AAMA,OAAOC,SAAP,MAAsB,YAAtB;AAEAzB,IAAI0B,GAAJ,CAAQxB,YAAR;AACAF,IAAI0B,GAAJ,CAAQvB,SAAR;AACAH,IAAI0B,GAAJ,CAAQtB,IAAR;AAEAJ,IAAI2B,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AAEA,IAAIC,YAAY,EAAhB;AAEA,IAAMC,QAAQ,IAAI1B,KAAK2B,KAAT,CAAe;AAC3BC,SAAO;AACLH,wBADK;AAELI,qBAAiB,IAFZ;AAGLC,kBAAc,IAHT;AAILC,iBAAa;AAJR,GADoB;AAO3BC,aAAW;AACTC,UADS,kBACFL,KADE,EACKM,KADL,EACY;AACnBN,YAAMG,WAAN,GAAoBG,KAApB;AACD,KAHQ;AAITC,eAJS,uBAIIP,KAJJ,EAIWQ,QAJX,EAIqB;AAC5BR,YAAMH,SAAN,CAAgBY,IAAhB,CAAqBD,QAArB;AACD,KANQ;AAOTE,YAPS,oBAOAV,KAPA,EAOOW,KAPP,EAOc;AACrBX,YAAMC,eAAN,CAAsBW,cAAtB,CAAqCH,IAArC,CAA0CE,KAA1C;AACD,KATQ;AAUTE,kBAVS,0BAUMb,KAVN,EAUac,EAVb,EAUiB;AACxB,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,MAAMH,SAAN,CAAgBmB,MAApC,EAA4CD,GAA5C,EAAiD;AAC/C,YAAIf,MAAMH,SAAN,CAAgBkB,CAAhB,EAAmBD,EAAnB,KAA0BA,EAA9B,EAAkC;AAChCd,gBAAMH,SAAN,CAAgBoB,MAAhB,CAAuBF,CAAvB,EAAyB,CAAzB;AACA,cAAIf,MAAMC,eAAN,IAAyB,IAA7B,EACE,IAAID,MAAMC,eAAN,CAAsBa,EAAtB,KAA6BA,EAAjC,EACEd,MAAMC,eAAN,GAAwB,IAAxB;AACJ;AACD;AACF;AACF,KApBQ;AAqBTiB,sBArBS,8BAqBUlB,KArBV,EAqBiBQ,QArBjB,EAqB2B;AAClCR,YAAMC,eAAN,GAAwBO,QAAxB;AACD,KAvBQ;AAwBTW,wBAxBS,gCAwBYnB,KAxBZ,EAwBmB;AAC1BA,YAAMC,eAAN,GAAwB,IAAxB;AACD,KA1BQ;AA2BTmB,mBA3BS,2BA2BOpB,KA3BP,EA2BcW,KA3Bd,EA2BqB;AAC5BX,YAAME,YAAN,GAAqBS,KAArB;AACD,KA7BQ;AA8BTU,qBA9BS,6BA8BSrB,KA9BT,EA8BgB;AACvBA,YAAME,YAAN,GAAqB,IAArB;AACD,KAhCQ;AAiCToB,uBAjCS,+BAiCWtB,KAjCX,EAiCkBuB,OAjClB,EAiC2B;AAClC,WAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIf,MAAMH,SAAN,CAAgBmB,MAApC,EAA4CD,GAA5C,EAAiD;AAC/C,YAAIf,MAAMH,SAAN,CAAgBkB,CAAhB,EAAmBD,EAAnB,KAA0BS,QAAQT,EAAtC,EAA0C;AACxCd,gBAAMH,SAAN,CAAgBkB,CAAhB,EAAmBS,KAAnB,GAA2BD,QAAQC,KAAnC;;AACA,cAAGD,QAAQT,EAAR,KAAed,MAAMC,eAAN,CAAsBa,EAAxC,EAA4C;AAC1Cd,kBAAMC,eAAN,CAAsBuB,KAAtB,GAA8BD,QAAQC,KAAtC;AACD;;AACD;AACD;AACF;AACF,KA3CQ;AA4CTC,eA5CS,uBA4CGzB,KA5CH,EA4CUc,EA5CV,EA4Cc;AACrB,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCI,MAAzD,EAAiED,GAAjE,EAAsE;AACpE,YAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCG,CAArC,EAAwCW,EAAxC,KAA+CZ,EAAnD,EAAuD;AACrDd,gBAAMC,eAAN,CAAsBW,cAAtB,CAAqCK,MAArC,CAA4CF,CAA5C,EAA8C,CAA9C;AACA,cAAIf,MAAME,YAAN,IAAsB,IAA1B,EACE,IAAIF,MAAME,YAAN,CAAmBwB,EAAnB,KAA0BZ,EAA9B,EACEd,MAAME,YAAN,GAAqB,IAArB;AACJ;AACD;AACF;AACF,KAtDQ;AAuDTyB,oBAvDS,4BAuDQ3B,KAvDR,EAuDeuB,OAvDf,EAuDwB;AAC/B,WAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCI,MAAzD,EAAiED,GAAjE,EAAsE;AACpE,YAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCG,CAArC,EAAwCW,EAAxC,KAA+CH,QAAQT,EAA3D,EAA+D;AAC7Dd,gBAAMC,eAAN,CAAsBW,cAAtB,CAAqCG,CAArC,EAAwCa,KAAxC,GAAgDL,QAAQC,KAAxD;;AACA,cAAGD,QAAQT,EAAR,KAAed,MAAME,YAAN,CAAmBwB,EAArC,EAAyC;AACvC1B,kBAAME,YAAN,CAAmB0B,KAAnB,GAA2BL,QAAQC,KAAnC;AACD;;AACD;AACD;AACF;AACF,KAjEQ;AAkETK,0BAlES,kCAkEc7B,KAlEd,EAkEqBuB,OAlErB,EAkE8B;AACrC,WAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCI,MAAzD,EAAiED,GAAjE,EAAsE;AACpE,YAAIf,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCG,CAArC,EAAwCW,EAAxC,KAA+CH,QAAQT,EAA3D,EAA+D;AAC7Dd,gBAAMC,eAAN,CAAsBW,cAAtB,CAAqCG,CAArC,EAAwCe,WAAxC,GAAsDP,QAAQQ,WAA9D;;AACA,cAAGR,QAAQT,EAAR,KAAed,MAAME,YAAN,CAAmBwB,EAArC,EAAyC;AACvC1B,kBAAME,YAAN,CAAmB4B,WAAnB,GAAiCP,QAAQQ,WAAzC;AACD;;AACD;AACD;AACF;AACF,KA5EQ;AA6ETC,iBA7ES,yBA6EKhC,KA7EL,EA6EYiC,UA7EZ,EA6EwB;AAC/BjC,YAAME,YAAN,CAAmBgC,WAAnB,CAA+BzB,IAA/B,CAAoCwB,UAApC;AACD,KA/EQ;AAgFTE,oBAhFS,4BAgFQnC,KAhFR,EAgFec,EAhFf,EAgFmB;AAC1B,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,MAAME,YAAN,CAAmBgC,WAAnB,CAA+BlB,MAAnD,EAA2DD,GAA3D,EAAgE;AAC9D,YAAIf,MAAME,YAAN,CAAmBgC,WAAnB,CAA+BnB,CAA/B,EAAkCW,EAAlC,KAAyCZ,EAA7C,EAAiD;AAC/Cd,gBAAME,YAAN,CAAmBgC,WAAnB,CAA+BjB,MAA/B,CAAsCF,CAAtC,EAAwC,CAAxC;AACA;AACD;AACF;AACF;AAvFQ,GAPgB;AAgG3BqB,WAAS;AACP5D,kBADO,gCACqBgD,KADrB,EAC4B;AAAA,UAAjBa,MAAiB,QAAjBA,MAAiB;AACjC,aAAO,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAa;AAC/B/D,wBAAegD,KAAf,EAAsBgB,IAAtB,CAA2B,oBAAY;AACrC,cAAIC,OAAOC,SAASC,IAApB;AACA,cAAInC,WAAW;AACdgB,mBAAOiB,KAAKb,KADE;AAEdgB,kBAAMH,KAAKI,iBAFG;AAGdC,uBAAWL,KAAKM,SAHF;AAIdjC,gBAAI2B,KAAKf,EAJK;AAKdsB,sBAAU,KALI;AAMdC,yBAAa;AANC,WAAf;AAQAzC,mBAASI,cAAT,GAA0B,EAA1B;AACAyB,iBAAO,aAAP,EAAsB7B,QAAtB;AACA+B,kBAAQ/B,QAAR;AACD,SAbD;AAcD,OAfM,CAAP;AAgBD,KAlBM;AAmBP/B,kBAnBO,iCAmBoBqC,EAnBpB,EAmBwB;AAAA,UAAduB,MAAc,SAAdA,MAAc;;AAC7B5D,sBAAeqC,EAAf,EAAmB0B,IAAnB,CAAwB,YAAM;AAC5BH,eAAO,gBAAP,EAAyBvB,EAAzB;AACD,OAFD;AAGD,KAvBM;AAwBPoC,2BAxBO,0CAwB4B;AAAA,UAATlD,KAAS,SAATA,KAAS;;AACjC;;;;;;;AAOAA,YAAMH,SAAN,CAAgBsD,MAAhB,CAAuB;AAAA,eAAKC,EAAEJ,QAAP;AAAA,OAAvB,EAAwCK,OAAxC,CAAgD,UAASC,CAAT,EAAW;AAAC,aAAKC,QAAL,CAAc,gBAAd,EAA+BD,EAAExC,EAAjC;AAAqC,OAAjG,EAAmG,IAAnG;AACD,KAjCM;AAkCPpC,uBAlCO,sCAkCyB6C,OAlCzB,EAkCkC;AAAA,UAAnBc,MAAmB,SAAnBA,MAAmB;AACvC,UAAIvB,KAAKS,QAAQT,EAAjB;AACA,UAAIU,QAAQD,QAAQC,KAApB;;AACA9C,2BAAoBoC,EAApB,EAAwBU,KAAxB,EAA+BgB,IAA/B,CAAoC,YAAM;AACxCH,eAAO,qBAAP,EAA8B;AAACvB,gBAAD;AAAKU;AAAL,SAA9B;AACD,OAFD;AAGD,KAxCM;AAyCPgC,oBAzCO,mCAyC4BjC,OAzC5B,EAyCqC;AAAA,UAAzBvB,KAAyB,SAAzBA,KAAyB;AAAA,UAAlBqC,MAAkB,SAAlBA,MAAkB;AAC1C,UAAIoB,WAAW,EAAf;AACA9E,kBAAY4C,OAAZ,EAAqBiB,IAArB,CAA0B,oBAAY;AACpCiB,mBAAWf,SAASC,IAApB;AACAc,iBAASC,sBAAT,GAAkC,EAAlC;AACA9E,4BAAoB6E,SAAS/B,EAA7B,EAAiC1B,MAAMC,eAAN,CAAsBa,EAAvD,EAA2D0B,IAA3D,CAAgE,YAAM;AACpEH,iBAAO,UAAP,EAAmBoB,QAAnB;AACD,SAFD;AAGD,OAND;AAOD,KAlDM;AAmDPE,iBAnDO,gCAmDwBpC,OAnDxB,EAmDiC;AAAA,UAAzBvB,KAAyB,SAAzBA,KAAyB;AAAA,UAAlBqC,MAAkB,SAAlBA,MAAkB;AACtC,UAAIoB,WAAW,EAAf;AACA9E,kBAAY4C,OAAZ,EAAqBiB,IAArB,CAA0B,oBAAY;AACpCiB,mBAAWf,SAASC,IAApB;AACA/D,4BAAoB6E,SAAS/B,EAA7B,EAAiC1B,MAAMC,eAAN,CAAsBa,EAAvD,EAA2D0B,IAA3D,CAAgE,YAAM;AACpE,cAAIjB,QAAQqC,WAAR,KAAwB,QAA5B,EAAsC;AACpC;;;;;;;;;AASA,gBAAIC,QAAQ7D,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCkD,GAArC,CAAyC,UAASR,CAAT,EAAY;AAAC,kBAAGA,EAAEI,sBAAF,IAA4B,IAA/B,EAAoC,IAAGJ,EAAEI,sBAAF,CAAyB,CAAzB,KAA+B,IAAlC,EAAuC,OAAOJ,EAAEI,sBAAF,CAAyB,CAAzB,CAAP;AAAmC,aAApK,EAAsKK,OAAtK,CAA8KxC,QAAQyC,OAAtL,CAAZ;;AACA,gBAAIH,SAAS,CAAC,CAAd,EAAiB;AACfhF,mCAAqBmB,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCiD,KAArC,EAA4CnC,EAAjE,EAAqEH,QAAQyC,OAA7E;AACAlF,+BAAiBkB,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCiD,KAArC,EAA4CnC,EAA7D,EAAiE+B,SAAS/B,EAA1E;AACA1B,oBAAMC,eAAN,CAAsBW,cAAtB,CAAqCiD,KAArC,EAA4CH,sBAA5C,CAAmE,CAAnE,IAAwED,SAAS/B,EAAjF;AACD;;AACD5C,6BAAiB2E,SAAS/B,EAA1B,EAA8BH,QAAQyC,OAAtC,EAA+CxB,IAA/C,CAAoD,YAAM;AACxDiB,uBAASC,sBAAT,GAAkC,EAAlC;AACAD,uBAASC,sBAAT,CAAgCjD,IAAhC,CAAqCc,QAAQyC,OAA7C;AACA3B,qBAAO,UAAP,EAAmBoB,QAAnB;AACD,aAJD;AAKD,WArBD,MAqBO,IAAIlC,QAAQqC,WAAR,KAAwB,OAA5B,EAAqC;AAC1C,gBAAIC,SAAQ7D,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCkD,GAArC,CAAyC,UAASR,CAAT,EAAY;AAAC,qBAAOA,EAAE5B,EAAT;AAAY,aAAlE,EAAoEqC,OAApE,CAA4ExC,QAAQyC,OAApF,CAAZ;;AACA,gBAAIvB,OAAOzC,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCiD,MAArC,CAAX;;AACA,gBAAIpB,KAAKiB,sBAAL,IAA+B,IAAnC,EAAyC;AACvC,kBAAIjB,KAAKiB,sBAAL,CAA4B,CAA5B,KAAkC,IAAtC,EAA4C;AAC1C5E,iCAAiB2E,SAAS/B,EAA1B,EAA8Be,KAAKiB,sBAAL,CAA4B,CAA5B,CAA9B;AACA7E,qCAAqB4D,KAAKf,EAA1B,EAA8Be,KAAKiB,sBAAL,CAA4B,CAA5B,CAA9B;AACAD,yBAASC,sBAAT,GAAkC,EAAlC;AACAD,yBAASC,sBAAT,CAAgCjD,IAAhC,CAAqCgC,KAAKiB,sBAAL,CAA4B,CAA5B,CAArC;AACD;AACF;;AACD5E,6BAAiB2D,KAAKf,EAAtB,EAA0B+B,SAAS/B,EAAnC,EAAuCc,IAAvC,CAA4C,YAAM;AAChDC,mBAAKiB,sBAAL,GAA8B,EAA9B;AACAjB,mBAAKiB,sBAAL,CAA4BjD,IAA5B,CAAiCgD,SAAS/B,EAA1C;AACAW,qBAAO,UAAP,EAAmBoB,QAAnB;AACD,aAJD;AAKD;AACF,SAvCD;AAwCD,OA1CD;AA2CD,KAhGM;AAiGP1E,eAjGO,8BAiGsB+B,EAjGtB,EAiG0B;AAAA,UAApBd,KAAoB,SAApBA,KAAoB;AAAA,UAAbqC,MAAa,SAAbA,MAAa;AAC/B,UAAI4B,mBAAmBjE,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCkD,GAArC,CAAyC,UAASR,CAAT,EAAY;AAAC,YAAGA,EAAEI,sBAAF,IAA4B,IAA/B,EAAoC,IAAGJ,EAAEI,sBAAF,CAAyB,CAAzB,KAA+B,IAAlC,EAAuC,OAAOJ,EAAEI,sBAAF,CAAyB,CAAzB,CAAP;AAAmC,OAApK,EAAsKK,OAAtK,CAA8KjD,EAA9K,CAAvB;AACA,UAAIoD,KAAKlE,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCuC,MAArC,CAA4C;AAAA,eAAKG,EAAE5B,EAAF,KAASZ,EAAd;AAAA,OAA5C,EAA8D,CAA9D,CAAT;AACA,UAAIqD,eAAe,EAAnB;;AAEA,UAAID,GAAGR,sBAAH,IAA6B,IAAjC,EAAuC;AAAE,YAAIQ,GAAGR,sBAAH,CAA0B,CAA1B,KAAgC,IAApC,EAA0C;AACjFS,yBAAeD,GAAGR,sBAAH,CAA0B,CAA1B,CAAf;AACD;AAAC;;AAEF,UAAIO,oBAAoB,CAAC,CAAzB,EAA4B;AAC1BpF,6BAAqBmB,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCqD,gBAArC,EAAuDvC,EAA5E,EAAgFZ,EAAhF,EAAoF0B,IAApF,CAAyF,YAAM;AAC7F,cAAI2B,gBAAgB,EAApB,EAAwB;AACtBrF,6BAAiBkB,MAAMC,eAAN,CAAsBW,cAAtB,CAAqCqD,gBAArC,EAAuDvC,EAAxE,EAA4EyC,YAA5E;AACAnE,kBAAMC,eAAN,CAAsBW,cAAtB,CAAqCqD,gBAArC,EAAuDP,sBAAvD,CAA8E,CAA9E,IAAmFS,YAAnF;AACD,WAHD,MAGO;AACLnE,kBAAMC,eAAN,CAAsBW,cAAtB,CAAqCqD,gBAArC,EAAuDP,sBAAvD,CAA8E,CAA9E,EAAiFU,KAAjF,CAAuF,CAAvF,EAAyF,CAAzF;AACD;AACF,SAPD;AAQD;;AAEDrF,mBAAY+B,EAAZ,EAAgB0B,IAAhB,CAAqB,YAAM;AACzBvD,gCAAwB6B,EAAxB,EAA4Bd,MAAMC,eAAN,CAAsBa,EAAlD,EAAsD0B,IAAtD,CAA2D,YAAM;AAC/DH,iBAAO,aAAP,EAAsBvB,EAAtB;AACD,SAFD;AAGD,OAJD;AAOD,KA5HM;AA6HP9B,oBA7HO,mCA6HsBuC,OA7HtB,EA6H+B;AAAA,UAAnBc,MAAmB,SAAnBA,MAAmB;AACpC,UAAIvB,KAAKS,QAAQT,EAAjB;AACA,UAAIU,QAAQD,QAAQC,KAApB;;AACAxC,wBAAiB8B,EAAjB,EAAqBU,KAArB,EAA4BgB,IAA5B,CAAiC,YAAM;AACrCH,eAAO,kBAAP,EAA2B;AAACvB,gBAAD;AAAKU;AAAL,SAA3B;AACD,OAFD;AAGD,KAnIM;AAoIPtC,0BApIO,yCAoI4BqC,OApI5B,EAoIqC;AAAA,UAAnBc,MAAmB,SAAnBA,MAAmB;AAC1C,UAAIvB,KAAKS,QAAQT,EAAjB;AACA,UAAIiB,cAAcR,QAAQQ,WAA1B;;AACA7C,8BAAuB4B,EAAvB,EAA2BiB,WAA3B,EAAwCS,IAAxC,CAA6C,YAAM;AACjDH,eAAO,wBAAP,EAAiC;AAACvB,gBAAD;AAAKiB;AAAL,SAAjC;AACD,OAFD;AAGD,KA1IM;AA2IP5C,oBA3IO,oCA2I2BoC,OA3I3B,EA2IoC;AAAA,UAAzBvB,KAAyB,UAAzBA,KAAyB;AAAA,UAAlBqC,MAAkB,UAAlBA,MAAkB;AACzC,UAAIgC,gBAAgB,EAApB;;AACAlF,wBAAiB;AAACqC,eAAOD,QAAQ+C,IAAhB;AAAsBN,iBAAShE,MAAME,YAAN,CAAmBwB;AAAlD,OAAjB,EAAwEc,IAAxE,CAA6E,oBAAY;AACvF6B,wBAAgB3B,SAASC,IAAzB;AACAtD,0BAAkBgF,cAAc3C,EAAhC,EAAoCc,IAApC,CAAyC,oBAAY;AACnDjD,2BAAiB;AAACgF,kBAAMhD,OAAP;AAAgBiD,iBAAK9B,SAASC;AAA9B,WAAjB,EAAsDH,IAAtD,CAA2D,YAAM;AAC/DH,mBAAO,eAAP,EAAwBgC,aAAxB;AACD,WAFD;AAGD,SAJD;AAKD,OAPD;AAQD,KArJM;AAsJPjF,oBAtJO,oCAsJoB0B,EAtJpB,EAsJwB;AAAA,UAAbuB,MAAa,UAAbA,MAAa;;AAC7BjD,wBAAiB0B,EAAjB,EAAqB0B,IAArB,CAA0B,YAAM;AAC9BH,eAAO,kBAAP,EAA2BvB,EAA3B;AACD,OAFD;AAGD,KA1JM;AA2JP2D,iBA3JO,iCA2JgB3D,EA3JhB,EA2JoB;AAAA,UAAZd,KAAY,UAAZA,KAAY;AACzBV,qBAAewB,EAAf,EAAmB0B,IAAnB,CAAwB,oBAAY;AAClC,YAAIgC,MAAM9B,SAASC,IAAnB;AACA,YAAI+B,WAAW1E,MAAME,YAAN,CAAmBgC,WAAnB,CAA+BiB,MAA/B,CAAsC;AAAA,iBAAclB,WAAWP,EAAX,KAAkBZ,EAAhC;AAAA,SAAtC,EAA0E,CAA1E,EAA6Ec,KAA5F;AACApC,2BAAmBkF,QAAnB,EAA6BF,GAA7B,EAAkChC,IAAlC,CAAuC,oBAAY;AACjD/C,oBAAUkF,MAAV,CAAiBjC,QAAjB;AACD,SAFD;AAGD,OAND;AAOD;AAnKM,GAhGkB;AAqQ3BkC,WAAS;AACPC,uBAAmB,2BAAC7E,KAAD,EAAW;AAC5B,aAAOA,MAAMH,SAAN,CAAgBsD,MAAhB,CAAuB;AAAA,eAAKC,EAAEJ,QAAP;AAAA,OAAvB,CAAP;AACD;AAHM,GArQkB;AA0Q3B8B,WAAS,CAACzG,qBAAqB;AAC7B0G,WAAO,CAAC,iBAAD,EAAmB,cAAnB;AADsB,GAArB,CAAD;AA1QkB,CAAf,CAAd;AA+QA,IAAI/G,GAAJ,CAAQ;AACNgH,UAAQ;AAAA,WAAKC,EAAEhH,GAAF,CAAL;AAAA,GADF;AAENK,gBAFM;AAGNwB,cAHM;AAINoF,WAAS;AACPC,kBADO,4BACU;AAAA;;AACftF,gBAAUoB,MAAV,CAAiB,CAAjB,EAAoBpB,UAAUmB,MAA9B;AACA,UAAIoE,MAAM7G,QAAV;AACA6G,UAAI5C,IAAJ,CAAS,UAACG,IAAD,EAAU;AACjB,aAAK,IAAI5B,IAAI,CAAb,EAAgBA,IAAI4B,KAAKA,IAAL,CAAU0C,SAAV,CAAoBrE,MAAxC,EAAgDD,GAAhD,EAAqD;AACnD,cAAI0B,OAAOE,KAAKA,IAAL,CAAU0C,SAAV,CAAoBtE,CAApB,CAAX;AACA,cAAIP,WAAW;AACZgB,mBAAOiB,KAAKb,KADA;AAEZgB,kBAAMH,KAAKI,iBAFC;AAGZC,uBAAWL,KAAKK,SAHJ;AAIZhC,gBAAI2B,KAAKf,EAJG;AAKZd,4BAAgB6B,KAAK6C,cALT;AAMZtC,sBAAU,KANE;AAOZC,yBAAa;AAPD,WAAf;AASApD,oBAAUY,IAAV,CAAeD,QAAf;AACD;;AACD,cAAK+E,qBAAL;;AACA,cAAKC,kBAAL;AACD,OAhBD;AAiBD,KArBM;AAsBPD,yBAtBO,mCAsBiB;AACtB,UAAI,KAAKE,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,KAAsC,IAA1C,EAAgD;AAChD,UAAI,KAAKwF,MAAL,CAAYzF,KAAZ,CAAkBH,SAAlB,KAAgC,IAApC,EAA0C;AAC1C,UAAI,KAAK4F,MAAL,CAAYzF,KAAZ,CAAkBH,SAAlB,CAA4B,CAA5B,MAAmC,IAAvC,EAA6C;AAC7C,UAAIgE,QAAQ,KAAK4B,MAAL,CAAYzF,KAAZ,CAAkBH,SAAlB,CAA4BiE,GAA5B,CAAgC,UAASR,CAAT,EAAW;AAAC,eAAOA,EAAExC,EAAT;AAAY,OAAxD,EAA0DiD,OAA1D,CAAkE,KAAK0B,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,CAAkCa,EAApG,CAAZ;;AACA,UAAI+C,UAAU,CAAC,CAAf,EAAkB;AAChB,aAAK4B,MAAL,CAAYpD,MAAZ,CAAmB,sBAAnB;AACD,OAFD,MAEO;AACL,aAAKoD,MAAL,CAAYpD,MAAZ,CAAmB,oBAAnB,EAAwC,KAAKoD,MAAL,CAAYzF,KAAZ,CAAkBH,SAAlB,CAA4BgE,KAA5B,CAAxC;AACD;AACF,KAhCM;AAiCP2B,sBAjCO,gCAiCc;AACnB,UAAI,KAAKC,MAAL,CAAYzF,KAAZ,CAAkBE,YAAlB,KAAmC,IAAvC,EAA6C;AAC7C,UAAI,KAAKuF,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,KAAsC,IAA1C,EAAgD;AAChD,UAAI,KAAKwF,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,CAAkCW,cAAlC,KAAqD,IAAzD,EAA+D;AAC/D,UAAI,KAAK6E,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,CAAkCW,cAAlC,CAAiD,CAAjD,MAAwD,IAA5D,EAAkE;AAClE,UAAIiD,QAAQ,KAAK4B,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,CAAkCW,cAAlC,CAAiDkD,GAAjD,CAAqD,UAASR,CAAT,EAAW;AAAC,eAAOA,EAAE5B,EAAT;AAAY,OAA7E,EAA+EqC,OAA/E,CAAuF,KAAK0B,MAAL,CAAYzF,KAAZ,CAAkBE,YAAlB,CAA+BwB,EAAtH,CAAZ;;AACA,UAAImC,UAAU,CAAC,CAAf,EAAkB;AAChB,aAAK4B,MAAL,CAAYpD,MAAZ,CAAmB,mBAAnB;AACD,OAFD,MAEO;AACL,aAAKoD,MAAL,CAAYpD,MAAZ,CAAmB,iBAAnB,EAAqC,KAAKoD,MAAL,CAAYzF,KAAZ,CAAkBC,eAAlB,CAAkCW,cAAlC,CAAiDiD,KAAjD,CAArC;AACD;AACF;AA5CM,GAJH;AAkDN6B,SAlDM,qBAkDI;AACR,SAAKP,cAAL;AACD;AApDK,CAAR,EAqDGQ,MArDH,CAqDU,MArDV","file":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron\\src\\main.js","sourceRoot":"C:\\Users\\chris\\OneDrive - GLASGOW CALEDONIAN UNIVERSITY\\3rd Year\\IP\\aileron","sourcesContent":["import Vue from 'vue/dist/vue.js'\nimport app from './app.vue'\nimport BootstrapVue from 'bootstrap-vue'\nimport VueRouter from 'vue-router'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\nimport Vuex from 'vuex'\nimport createPersistedState from 'vuex-persistedstate'\nimport router from './router'\nimport {getAll,\n  createTimeline, deleteTimeline, changeTimelineTitle,\n  createEvent, linkEventToTimeline, unlinkEventFromEvent, linkEventToEvent, deleteEvent, changeEventTitle, unlinkEventFromTimeline, changeEventDescription,\n  createAttachment, deleteAttachment,\n  generateUploadURL, generateGetURL, uploadAttachment, downloadAttachment\n} from './scripts/api'\nimport FileSaver from 'file-saver'\n\nVue.use(BootstrapVue)\nVue.use(VueRouter)\nVue.use(Vuex)\n\nVue.config.productionTip = false\n\nvar timelines = []\n\nconst store = new Vuex.Store({\n  state: {\n    timelines,\n    currentTimeline: null,\n    currentEvent: null,\n    searchValue: ''\n  },\n  mutations: {\n    search(state, value) {\n      state.searchValue = value\n    },\n    addTimeline (state, timeline) {\n      state.timelines.push(timeline)\n    },\n    addEvent(state, event) {\n      state.currentTimeline.timelineEvents.push(event)\n    },\n    removeTimeline(state, id) {\n      for (var i = 0; i < state.timelines.length; i++) {\n        if (state.timelines[i].id === id) {\n          state.timelines.splice(i,1)\n          if (state.currentTimeline != null)\n            if (state.currentTimeline.id === id)\n              state.currentTimeline = null\n          return\n        }\n      }\n    },\n    setCurrentTimeline(state, timeline) {\n      state.currentTimeline = timeline\n    },\n    clearCurrentTimeline(state) {\n      state.currentTimeline = null\n    },\n    setCurrentEvent(state, event) {\n      state.currentEvent = event\n    },\n    clearCurrentEvent(state) {\n      state.currentEvent = null\n    },\n    updateTimelineTitle(state, payload) {\n      for (var i = 0; i < state.timelines.length; i++) {\n        if (state.timelines[i].id === payload.id) {\n          state.timelines[i].title = payload.title\n          if(payload.id === state.currentTimeline.id) {\n            state.currentTimeline.title = payload.title\n          }\n          return\n        }\n      }\n    },\n    removeEvent(state, id) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === id) {\n          state.currentTimeline.timelineEvents.splice(i,1)\n          if (state.currentEvent != null)\n            if (state.currentEvent.Id === id)\n              state.currentEvent = null\n          return\n        }\n      }\n    },\n    updateEventTitle(state, payload) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === payload.id) {\n          state.currentTimeline.timelineEvents[i].Title = payload.title\n          if(payload.id === state.currentEvent.Id) {\n            state.currentEvent.Title = payload.title\n          }\n          return\n        }\n      }\n    },\n    updateEventDescription(state, payload) {\n      for (var i = 0; i < state.currentTimeline.timelineEvents.length; i++) {\n        if (state.currentTimeline.timelineEvents[i].Id === payload.id) {\n          state.currentTimeline.timelineEvents[i].Description = payload.description\n          if(payload.id === state.currentEvent.Id) {\n            state.currentEvent.Description = payload.description\n          }\n          return\n        }\n      }\n    },\n    addAttachment(state, attachment) {\n      state.currentEvent.Attachments.push(attachment)\n    },\n    removeAttachment(state, id) {\n      for (var i = 0; i < state.currentEvent.Attachments.length; i++) {\n        if (state.currentEvent.Attachments[i].Id === id) {\n          state.currentEvent.Attachments.splice(i,1)\n          return\n        }\n      }\n    }\n  },\n  actions: {\n    createTimeline ({ commit }, title) {\n      return new Promise ((resolve) => {\n        createTimeline(title).then(response => {\n          var item = response.data\n          var timeline = {\n           title: item.Title,\n           date: item.CreationTimeStamp,\n           isDeleted: item.IsDeleted,\n           id: item.Id,\n           selected: false,\n           _rowVariant: ''\n        }\n          timeline.timelineEvents = []\n          commit('addTimeline', timeline)\n          resolve(timeline)\n        })\n      })\n    },\n    deleteTimeline({ commit }, id) {\n      deleteTimeline(id).then(() => {\n        commit('removeTimeline', id)\n      })\n    },\n    deleteSelectedTimelines({ state }) {\n      /*\n        Filter returns an array of all selected timelines.\n        Foreach loops through that returned array,\n        using 'e' as the current timline.\n        Dispatch calls deleteTimeline action.\n        This at the end allows the use of this inside the forEach function.\n      */\n      state.timelines.filter(t => t.selected).forEach(function(e){this.dispatch('deleteTimeline',e.id)}, this)\n    },\n    changeTimelineTitle({ commit }, payload) {\n      var id = payload.id\n      var title = payload.title\n      changeTimelineTitle(id, title).then(() => {\n        commit('updateTimelineTitle', {id, title})\n      })\n    },\n    createEventExact ({state, commit}, payload) {\n      var newEvent = {}\n      createEvent(payload).then(response => {\n        newEvent = response.data\n        newEvent.LinkedTimelineEventIds = []\n        linkEventToTimeline(newEvent.Id, state.currentTimeline.id).then(() => {\n          commit('addEvent', newEvent)\n        })\n      })\n    },\n    createEventBA({state, commit}, payload) {\n      var newEvent = {}\n      createEvent(payload).then(response => {\n        newEvent = response.data\n        linkEventToTimeline(newEvent.Id, state.currentTimeline.id).then(() => {\n          if (payload.beforeAfter === 'before') {\n            /*\n              Create a new timeline, create Event 1 at 12:00.\n              Create Event 2 set as before Event 1.\n              Now if you create Event 3 and also set this as before Event 1,\n              this will find that Event 2 already has a link to Event 1.\n              Replaces Event 2's link to Event 1 with a link to Event 3.\n              Links Event 3 to Event 1.\n              index would be the index of Event 2 in that example\n            */\n            let index = state.currentTimeline.timelineEvents.map(function(e) {if(e.LinkedTimelineEventIds != null)if(e.LinkedTimelineEventIds[0] != null)return e.LinkedTimelineEventIds[0]}).indexOf(payload.eventId)\n            if (index != -1) {\n              unlinkEventFromEvent(state.currentTimeline.timelineEvents[index].Id, payload.eventId)\n              linkEventToEvent(state.currentTimeline.timelineEvents[index].Id, newEvent.Id)\n              state.currentTimeline.timelineEvents[index].LinkedTimelineEventIds[0] = newEvent.Id\n            }\n            linkEventToEvent(newEvent.Id, payload.eventId).then(() => {\n              newEvent.LinkedTimelineEventIds = []\n              newEvent.LinkedTimelineEventIds.push(payload.eventId)\n              commit('addEvent', newEvent)\n            })\n          } else if (payload.beforeAfter === 'after') {\n            let index = state.currentTimeline.timelineEvents.map(function(e) {return e.Id}).indexOf(payload.eventId)\n            let item = state.currentTimeline.timelineEvents[index]\n            if (item.LinkedTimelineEventIds != null) {\n              if (item.LinkedTimelineEventIds[0] != null) {\n                linkEventToEvent(newEvent.Id, item.LinkedTimelineEventIds[0])\n                unlinkEventFromEvent(item.Id, item.LinkedTimelineEventIds[0])\n                newEvent.LinkedTimelineEventIds = []\n                newEvent.LinkedTimelineEventIds.push(item.LinkedTimelineEventIds[0])\n              }\n            }\n            linkEventToEvent(item.Id, newEvent.Id).then(() => {\n              item.LinkedTimelineEventIds = []\n              item.LinkedTimelineEventIds.push(newEvent.Id)\n              commit('addEvent', newEvent)\n            })\n          }\n        })\n      })\n    },\n    deleteEvent({state, commit}, id) {\n      var eventBeforeIndex = state.currentTimeline.timelineEvents.map(function(e) {if(e.LinkedTimelineEventIds != null)if(e.LinkedTimelineEventIds[0] != null)return e.LinkedTimelineEventIds[0]}).indexOf(id)\n      var ev = state.currentTimeline.timelineEvents.filter(e => e.Id === id)[0]\n      var eventAfterId = ''\n\n      if (ev.LinkedTimelineEventIds != null) { if (ev.LinkedTimelineEventIds[0] != null) {\n        eventAfterId = ev.LinkedTimelineEventIds[0]\n      }}\n\n      if (eventBeforeIndex != -1) {\n        unlinkEventFromEvent(state.currentTimeline.timelineEvents[eventBeforeIndex].Id, id).then(() => {\n          if (eventAfterId != '') {\n            linkEventToEvent(state.currentTimeline.timelineEvents[eventBeforeIndex].Id, eventAfterId)\n            state.currentTimeline.timelineEvents[eventBeforeIndex].LinkedTimelineEventIds[0] = eventAfterId\n          } else {\n            state.currentTimeline.timelineEvents[eventBeforeIndex].LinkedTimelineEventIds[0].slice(0,1)\n          }\n        })\n      }\n\n      deleteEvent(id).then(() => {\n        unlinkEventFromTimeline(id, state.currentTimeline.id).then(() => {\n          commit('removeEvent', id)\n        })\n      })\n\n\n    },\n    changeEventTitle({ commit }, payload) {\n      var id = payload.id\n      var title = payload.title\n      changeEventTitle(id, title).then(() => {\n        commit('updateEventTitle', {id, title})\n      })\n    },\n    changeEventDescription({ commit }, payload) {\n      var id = payload.id\n      var description = payload.description\n      changeEventDescription(id, description).then(() => {\n        commit('updateEventDescription', {id, description})\n      })\n    },\n    createAttachment({state, commit}, payload) {\n      var newAttachment = {}\n      createAttachment({title: payload.name, eventId: state.currentEvent.Id}).then(response => {\n        newAttachment = response.data\n        generateUploadURL(newAttachment.Id).then(response => {\n          uploadAttachment({file: payload, url: response.data}).then(() => {\n            commit('addAttachment', newAttachment)\n          })\n        })\n      })\n    },\n    deleteAttachment({commit}, id) {\n      deleteAttachment(id).then(() => {\n        commit('removeAttachment', id)\n      })\n    },\n    getAttachment({state}, id) {\n      generateGetURL(id).then(response => {\n        var url = response.data\n        var filename = state.currentEvent.Attachments.filter(attachment => attachment.Id === id)[0].Title\n        downloadAttachment(filename, url).then(response => {\n          FileSaver.saveAs(response)\n        })\n      })\n    }\n  },\n  getters: {\n    selectedTimelines: (state) => {\n      return state.timelines.filter(t => t.selected)\n    }\n  },\n  plugins: [createPersistedState({\n    paths: ['currentTimeline','currentEvent']\n })]\n})\n\nnew Vue({\n  render: h => h(app),\n  router,\n  store,\n  methods: {\n    fetchTimelines() {\n      timelines.splice(0, timelines.length)\n      var get = getAll()\n      get.then((data) => {\n        for (var i = 0; i < data.data.Timelines.length; i++) {\n          var item = data.data.Timelines[i]\n          var timeline = {\n             title: item.Title,\n             date: item.CreationTimeStamp,\n             isDeleted: item.isDeleted,\n             id: item.Id,\n             timelineEvents: item.TimelineEvents,\n             selected: false,\n             _rowVariant: ''\n          }\n          timelines.push(timeline)\n        }\n        this.updateCurrentTimeline()\n        this.updateCurrentEvent()\n      })\n    },\n    updateCurrentTimeline() {\n      if (this.$store.state.currentTimeline === null) return\n      if (this.$store.state.timelines === null) return\n      if (this.$store.state.timelines[0] === null) return\n      var index = this.$store.state.timelines.map(function(e){return e.id}).indexOf(this.$store.state.currentTimeline.id)\n      if (index === -1) {\n        this.$store.commit('clearCurrentTimeline')\n      } else {\n        this.$store.commit('setCurrentTimeline',this.$store.state.timelines[index])\n      }\n    },\n    updateCurrentEvent() {\n      if (this.$store.state.currentEvent === null) return\n      if (this.$store.state.currentTimeline === null) return\n      if (this.$store.state.currentTimeline.timelineEvents === null) return\n      if (this.$store.state.currentTimeline.timelineEvents[0] === null) return\n      var index = this.$store.state.currentTimeline.timelineEvents.map(function(e){return e.Id}).indexOf(this.$store.state.currentEvent.Id)\n      if (index === -1) {\n        this.$store.commit('clearCurrentEvent')\n      } else {\n        this.$store.commit('setCurrentEvent',this.$store.state.currentTimeline.timelineEvents[index])\n      }\n    }\n  },\n  mounted() {\n    this.fetchTimelines()\n  }\n}).$mount('#app')\n"]}]}