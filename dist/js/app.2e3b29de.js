webpackJsonp([1],{0:function(e,t,n){e.exports=n("NHnr")},"1/oy":function(e,t){},"9M+g":function(e,t){},AUdA:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},LMjS:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("EuXz"),n("y9m4");var i=n("4bK6"),l=n.n(i),a={name:"aHeader",data:function(){return{searchValue:""}},methods:{headerClicked:function(){event.stopPropagation()},search:function(){console.log(this.searchValue)}}},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-row",{staticClass:"header",attrs:{id:"header","align-v":"start"},on:{click:e.headerClicked}},[i("b-col",{staticClass:"logo",attrs:{md:"6"}},[i("router-link",{attrs:{to:"/"}},[i("img",{attrs:{src:n("iQH9"),alt:"Aileron Airways"}})])],1),i("b-col",{staticClass:"search",attrs:{md:"6","align-self":"center"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:"Search...",id:"header-search-box"},domProps:{value:e.searchValue},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)},input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),e.searchValue.length>0?i("i",{staticClass:"material-icons header-icon",attrs:{id:"header-clear-icon"},on:{click:function(t){e.searchValue=""}}},[e._v("clear")]):e._e(),i("i",{staticClass:"material-icons header-icon",attrs:{id:"header-search-icon"},on:{click:e.search}},[e._v("search")])])],1)},c=[],s=n("XyMi");function r(e){n("vNef")}var d=!1,u=r,m="data-v-8066b2e4",v=null,h=Object(s["a"])(a,o,c,d,u,m,v),f=h.exports,T={name:"app",components:{aHeader:f}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{id:"app",fluid:""}},[n("a-header"),n("router-view")],1)},E=[];function g(e){n("Q6DT")}var b=!1,w=g,I=null,k=null,y=Object(s["a"])(T,p,E,b,w,I,k),_=y.exports,C=n("e6fC"),D=n("/ocq"),A=(n("Jmt5"),n("9M+g"),n("NYxO")),x=n("424j"),S={name:"aSelectionHandler",props:{selectCount:{type:Number,required:!0}},methods:{handlerClicked:function(){event.stopPropagation()},del:function(){this.$emit("del")},cancel:function(){this.$emit("cancel")},edit:function(){this.$emit("edit")}}},L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.selectCount>0?n("b-row",{staticClass:"selection-handler",on:{click:function(t){e.handlerClicked()}}},[n("b-col",{staticClass:"main",attrs:{lg:"8","offset-lg":"2",md:"10","offset-md":"1"}},[n("h2",[e._v(e._s(e.selectCount)+" timeline"),this.selectCount>1?n("span",[e._v("s")]):e._e(),e._v(" selected")]),n("div",{staticClass:"buttons"},[1===e.selectCount?n("b-btn",{attrs:{variant:"info"},on:{click:e.edit}},[e._v("Edit")]):e._e(),n("b-btn",{attrs:{variant:"cancel"},on:{click:e.cancel}},[e._v("Cancel")]),n("b-btn",{attrs:{variant:"delete"},on:{click:e.del}},[e._v("Delete")])],1)])],1):e._e()},$=[];function M(e){n("AUdA")}var W=!1,B=M,O="data-v-1952c190",N=null,V=Object(s["a"])(S,L,$,W,B,O,N),P=V.exports;n("uDYd"),n("VjuZ");function j(e){var t=621355968e9,n=e-t,i=n/1e4,l=new Date(i);return l.toLocaleDateString()}function R(e){return 16===e.length||18===e.length?e.substring(11,16):"Time not available"}function F(e){if(16===e.length||18===e.length){var t=e.substr(8,2),n=e.substr(5,2),i=e.substr(0,4);return t+"/"+n+"/"+i}return"Date not available"}function H(e){var t=e.replace(/\s/g,"");return t.length>=5}function U(e){return null!=e.LinkedTimelineEventIds&&null!=e.LinkedTimelineEventIds[0]}function z(e){for(var t=e.sort(function(e,t){return e=new Date(e.EventDateTime),t=new Date(t.EventDateTime),e-t}),n=[],i=t.length-1;i>=0;i--)U(t[i])&&n.push(t.splice(i,1)[0]);while(0!=n.length)for(var l=n.length-1;l>=0;l--){var a=t.map(function(e){if(U(e))return e.LinkedTimelineEventIds[0]}).indexOf(n[l].Id)+1;if(0===a&&(a=U(n[l])?t.map(function(e){return e.Id}).indexOf(n[l].LinkedTimelineEventIds[0]):-1),-1!=a){var o=n.splice(l,1)[0];t.splice(a,0,o)}}return t}Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})};var Y=n("7t+N"),G=n.n(Y),K=[{key:"title",sortable:!0},{key:"date",sortable:!0,formatter:"formatDate"}],X={by:"date",desc:!1};function Q(e,t){X.by=e,X.desc=t}function q(){X.by="",X.desc=""}var J={};function Z(e){e.selected=!0,e._rowVariant="select",J=e}function ee(e){e.selected=!1,e._rowVariant=""}var te={},ne={name:"aRegister",components:{aSelectionHandler:P},data:function(){return{fields:K,sort:X,newTimelineTitle:"",showTitleWarning:!1,modal:!1,modalTitle:"",modalType:"",formatDate:j}},mounted:function(){var e=this;G()("#app").click(function(){e.clearSelected()})},computed:{timelines:function(){return this.$store.state.timelines},selectCount:function(){return this.$store.getters.selectedTimelines.length}},methods:{clearSelected:function(){for(var e=0;e<this.$store.state.timelines.length;e++){var t=this.$store.state.timelines[e];t.selected=!1,t._rowVariant=""}},selectBetweenRows:function(e){for(var t=this.$store.state.timelines,n=t.indexOf(J),i=Math.min(e,n);i<Math.max(e,n);i++)t[i].selected=!0,t[i]._rowVariant="select"},cancel:function(){this.clearSelected()},sortChanged:function(e){e.sortBy===X.by&&!1===e.sortDesc&&!0===X.desc?q():Q(e.sortBy,e.sortDesc)},rowClicked:function(e,t,n){n.stopPropagation(),e.selected?n.ctrlKey?ee(e):n.shiftKey||(this.selectCount>1?(this.clearSelected(),Z(e)):ee(e)):n.ctrlKey?Z(e):n.shiftKey?(this.selectCount>0&&this.selectBetweenRows(t),Z(e)):(this.selectCount>0&&this.clearSelected(),Z(e))},openTimeline:function(e){this.$store.commit("setCurrentTimeline",e),this.$router.push({name:"TIMELINE"})},createTimeline:function(){var e=this;if(!H(this.newTimelineTitle))return document.getElementById("titleInput").focus(),void(this.showTitleWarning=!0);this.closeModal(),this.$store.dispatch("createTimeline",this.newTimelineTitle).then(function(t){e.openTimeline(t)})},deleteTimeline:function(){this.closeModal(),this.$store.getters.selectedTimelines.length>0?this.$store.dispatch("deleteSelectedTimelines"):this.$store.dispatch("deleteTimeline",J.id)},changeTitle:function(){if(!H(this.newTimelineTitle))return document.getElementById("titleInput").focus(),void(this.showTitleWarning=!0);this.closeModal();var e={id:J.id,title:this.newTimelineTitle};this.$store.dispatch("changeTimelineTitle",e)},checkTitleInput:function(){!0===this.showTitleWarning&&H(this.newTimelineTitle)&&(this.showTitleWarning=!1)},openModal:function(e){this.modal=!0,this.modalType=e},closeModal:function(){this.modal=!this.modal},modalOpened:function(){"createTimeline"===this.modalType?(document.getElementById("titleInput").focus(),this.modalTitle="Create"):"deleteTimeline"===this.modalType?this.modalTitle="Delete":"editTitle"===this.modalType&&(document.getElementById("titleInput").focus(),this.modalTitle="Edit",this.newTimelineTitle=J.title)},modalClosed:function(){"createTimeline"!==this.modalType&&"editTitle"!==this.modalType||(this.clearSelected(),this.newTimelineTitle="",this.showTitleWarning=!1),this.modalType="",this.modalTitle=""},rowHovered:function(e,t){te.item=e,te.index=t},openContextMenu:function(e){if("td"===e.target.localName){var t=document.getElementById("contextmenu");t.style.display="inherit",t.style.top=e.clientY+"px",t.style.left=e.clientX+"px",this.clearSelected(),Z(te.item),t.onmouseleave=function(){t.style.display="none"}}}}},ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",{staticClass:"register",attrs:{"align-v":"center"},on:{click:function(t){e.clearSelected()}}},[n("b-col"),n("b-col",{attrs:{md:"11"},on:{contextmenu:function(t){t.preventDefault(),e.openContextMenu(t)}}},[n("b-btn",{staticClass:"btn-round",staticStyle:{float:"right"},attrs:{variant:"create"},on:{click:function(t){e.openModal("createTimeline")}}},[e._v("+")]),n("b-table",{attrs:{items:e.timelines,"bordered:false":"","sort-by":e.sort.by,"sort-desc":e.sort.desc,fields:e.fields,fixed:""},on:{"update:sortBy":function(t){e.$set(e.sort,"by",t)},"update:sortDesc":function(t){e.$set(e.sort,"desc",t)},"row-clicked":e.rowClicked,"sort-changed":e.sortChanged,"row-dblclicked":e.openTimeline,"row-hovered":e.rowHovered}})],1),n("b-col")],1),n("div",{attrs:{id:"contextmenu"}},[n("ul",[n("li",{on:{click:function(t){e.openModal("editTitle")}}},[e._v("Edit title")]),n("li",{on:{click:function(t){e.openModal("deleteTimeline")}}},[e._v("Delete")])])]),n("a-selection-handler",{attrs:{"select-count":e.selectCount},on:{del:function(t){e.openModal("deleteTimeline")},cancel:e.cancel,edit:function(t){e.openModal("editTitle")}}}),n("b-modal",{attrs:{title:e.modalTitle},on:{shown:e.modalOpened,hidden:e.modalClosed},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",["createTimeline"===e.modalType?n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newTimelineTitle,expression:"newTimelineTitle"}],attrs:{type:"text",placeholder:"Enter title",id:"titleInput"},domProps:{value:e.newTimelineTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.createTimeline(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newTimelineTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning}},[e._v("Title must be at least 5 characters long")])],1):"deleteTimeline"===e.modalType?n("b-col",[n("p",[e._v("\n            Are you sure you wish to delete selected timelines?\n          ")])]):"editTitle"===e.modalType?n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newTimelineTitle,expression:"newTimelineTitle"}],attrs:{type:"text",placeholder:"Enter new title",id:"titleInput"},domProps:{value:e.newTimelineTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.changeTitle(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newTimelineTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning}},[e._v("Title must be at least 5 characters long")])],1):e._e()],1)],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{staticClass:"float-left",on:{click:e.closeModal}},[e._v("CANCEL")]),"createTimeline"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.createTimeline}},[e._v("CREATE")]):"deleteTimeline"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.deleteTimeline}},[e._v("DELETE")]):"editTitle"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.changeTitle}},[e._v("SAVE")]):e._e()],1)],1)],1)},le=[];function ae(e){n("LMjS")}var oe=!1,ce=ae,se=null,re=null,de=Object(s["a"])(ne,ie,le,oe,ce,se,re),ue=de.exports,me=!1,ve=[],he=[],fe=[],Te=1,pe={name:"aEvents",data:function(){return{formatEventTime:R,formatEventDate:F,scale:Te,selectedEvent:{Id:"",Title:"",EventDateTime:"",Description:"",IsDeleted:"",Location:"",LinkedTimelineEventIds:[],Attachments:[]},modal:!1,modalTitle:"",newEventTitle:"",showTitleWarning:!1,modalType:""}},mounted:function(){var e=this,t=document.getElementById("slider");n("uN3R")(function(n,i,l,a){e.isWidthLarge()&&a.ctrlKey&&(a.preventDefault(),i>0&&e.scale>.2&&(e.scale-=.1),i<1.2&&(e.scale+=.1),t.style.transform="scale("+e.scale+")")});var i=this;G()(window).resize(function(){i.clearSelected()})},computed:{sliderWidth:function(){return 375*this.events.length+"px"},eventsInOrder:function(){return z(this.events)},selectedTitle:function(){return null!=this.selectedEvent.Title?this.selectedEvent.Title:""},selectedTime:function(){return null!=this.selectedEvent.EventDateTime?R(this.selectedEvent.EventDateTime):""},selectedDate:function(){return null!=this.selectedEvent.EventDateTime?F(this.selectedEvent.EventDateTime):""},selectedDescription:function(){if(null!=this.selectedEvent.Description){var e=this.selectedEvent.Description;return e.length>90&&(e=e.substr(0,90)+"..."),e}return""}},props:{events:{type:Array,required:!0}},methods:{drag:function(e,t){"down"===t&&(me=!0,ve=[e.clientX,e.clientY]),"up"===t&&(me=!1),"drag"===t&&me&&(he=[e.clientX,e.clientY],fe=[he[0]-ve[0],he[1]-ve[1]],e.srcElement.scrollLeft=e.srcElement.scrollLeft-fe[0]/10)},clickedTitle:function(e){if(e.srcElement.classList.contains("selected"))this.clearSelected();else{this.clearSelected(),e.srcElement.classList.add("selected"),this.selectedEvent=this.getEventFromId(e.srcElement.id);var t=document.getElementById("event-info");if(this.isWidthLarge()){var n=e.target.offsetLeft;t.style.left=n+"px",t.style.top=""}else{var i=e.target.offsetTop+18,l=e.target.offsetLeft+G()(".event").width()-200;t.style.top=i+"px",t.style.left=l+"px"}}},clearSelected:function(){for(var e=document.getElementsByClassName("selected"),t=e.length-1;t>=0;t--)e[0].classList.remove("selected");this.selectedEvent={Id:"",Title:"",EventDateTime:"",Description:"",IsDeleted:"",Location:"",LinkedTimelineEventIds:[],Attachments:[]}},getEventFromId:function(e){return this.events.filter(function(t){return t.Id===e})[0]},editEventTitle:function(){},openEvent:function(){this.$store.commit("setCurrentEvent",this.selectedEvent),this.$router.push({name:"EVENT"})},deleteEvent:function(){this.closeModal(),this.$store.dispatch("deleteEvent",this.selectedEvent.Id),this.clearSelected()},dateFromDateTime:function(e){return e.substr(0,10)},timeFromDateTime:function(e){return e.substr(11,16)},openModal:function(e){this.modal=!0,this.modalType=e},closeModal:function(){this.modal=!this.modal},modalOpened:function(){"deleteEvent"===this.modalType?this.modalTitle="Delete":"editEventTitle"===this.modalType&&(document.getElementById("titleInput").focus(),this.modalTitle="Edit",this.newEventTitle=this.selectedEvent.Title)},modalClosed:function(){"editEventTitle"===this.modalType&&(this.newEventTitle="",this.showTitleWarning=!1),this.modalType="",this.modalTitle=""},checkTitleInput:function(){!0===this.showTitleWarning&&H(this.newEventTitle)&&(this.showTitleWarning=!1)},changeEventTitle:function(){if(!H(this.newEventTitle))return document.getElementById("titleInput").focus(),void(this.showTitleWarning=!0);this.closeModal();var e={id:this.selectedEvent.Id,title:this.newEventTitle};this.$store.dispatch("changeEventTitle",e)},isWidthLarge:function(){var e=window.outerWidth;return e>992}}},Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"timeline-events"},[n("div",{staticClass:"events",attrs:{id:"container"},on:{mousedown:function(t){e.drag(t,"down")},mousemove:function(t){e.drag(t,"drag")},mouseup:function(t){e.drag(t,"up")}}},[n("div",{style:{width:e.sliderWidth},attrs:{id:"slider"}},[e._l(e.eventsInOrder,function(t,i){return n("div",{key:t.id,staticClass:"event"},[0===i||i===e.events.length-1?n("div",{staticClass:"time"},[n("p",[e._v(e._s(e.formatEventTime(t.EventDateTime)))])]):e._e(),n("div",{staticClass:"title",attrs:{id:t.Id},on:{click:function(t){e.clickedTitle(t)}}},[n("p",[e._v(e._s(t.Title))])]),i!=e.events.length-1?n("div",{attrs:{id:"h-line"}}):e._e(),0===i||i===e.events.length-1?n("div",{staticClass:"v-line",attrs:{id:"v-line-time"}}):e._e(),e.selectedEvent.Id===t.Id?n("div",{staticClass:"v-line",attrs:{id:"v-line-title"}}):e._e()])}),n("div",{staticClass:"info",attrs:{id:"event-info"}},[""!=e.selectedEvent.Id?n("div",{attrs:{id:"event-info-inner"}},[e.isWidthLarge()?n("div",[n("h3",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.openModal("editEventTitle")}}},[e._v(e._s(e.selectedTitle))]),n("h4",[e._v(e._s(e.selectedDate)+" - "+e._s(e.selectedTime))]),n("p",[e._v("\n              "+e._s(e.selectedDescription)+"\n            ")]),n("b-btn",{attrs:{variant:"create"},on:{click:e.openEvent}},[e._v("More")]),n("b-btn",{staticStyle:{float:"right"},attrs:{variant:"delete"},on:{click:function(t){e.openModal("deleteEvent")}}},[e._v("Delete")])],1):n("div",{staticClass:"event-info-mobile"},[n("b-btn",{attrs:{variant:"create"},on:{click:e.openEvent}},[e._v("More")]),n("b-btn",{staticStyle:{float:"right"},attrs:{variant:"delete"},on:{click:function(t){e.openModal("deleteEvent")}}},[e._v("Delete")])],1)]):e._e()])],2)]),n("b-modal",{attrs:{title:e.modalTitle,size:"lg"},on:{shown:e.modalOpened,hidden:e.modalClosed},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("b-container",{attrs:{fluid:""}},["deleteEvent"===e.modalType?n("b-row",[n("b-col",[n("p",[e._v("\n            Are you sure you wish to delete this event?\n          ")])])],1):"editEventTitle"===e.modalType?n("b-row",[n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEventTitle,expression:"newEventTitle"}],attrs:{type:"text",placeholder:"Enter new title",id:"titleInput"},domProps:{value:e.newEventTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.changeEventTitle(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newEventTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning}},[e._v("Title must be at least 5 characters long")])],1)],1):e._e()],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{staticClass:"float-left",on:{click:e.closeModal}},[e._v("CANCEL")]),"deleteEvent"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.deleteEvent}},[e._v("DELETE")]):"editEventTitle"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.changeEventTitle}},[e._v("SAVE")]):e._e()],1)],1)],1)},ge=[];function be(e){n("SoWc")}var we=!1,Ie=be,ke=null,ye=null,_e=Object(s["a"])(pe,Ee,ge,we,Ie,ke,ye),Ce=_e.exports,De={name:"aTimeline",data:function(){return{modal:!1,modalTitle:"",newEventTitle:"",showTitleWarning:!1,modalType:"",exactDateTime:!1,newEventDescription:"",beforeAfterSelect:null,beforeAfterOptions:[{value:null,text:"Before/After",disabled:!0},{value:"before",text:"Before"},{value:"after",text:"After"}],eventSelect:null,newEventDateTime:null,newTimelineTitle:""}},components:{aEvents:Ce},computed:{timeline:function(){return this.$store.state.currentTimeline},title:function(){return this.timeline.title},date:function(){return j(this.timeline.date)},events:function(){return this.timeline.timelineEvents||[]},eventOptions:function(){for(var e=[{value:null,text:"Select an event",disabled:!0}],t=0;t<this.events.length;t++){var n={value:this.events[t].Id,text:this.events[t].Title};e.push(n)}return e},startTime:function(){return this.timeFromDateTime(this.events[0].EventDateTime)},endTime:function(){return this.timeFromDateTime(this.events[this.events.length-1].EventDateTime)}},methods:{back:function(){this.$router.push({name:"REGISTER"})},timeFromDateTime:function(e){return e.substring(11,16)},deleteTimeline:function(){this.closeModal(),this.$store.dispatch("deleteTimeline",this.timeline.id),this.back()},openModal:function(e){this.modal=!0,this.modalType=e},closeModal:function(){this.modal=!this.modal},modalOpened:function(){"createEvent"===this.modalType?(document.getElementById("title-input").focus(),this.modalTitle="Create"):"deleteTimeline"===this.modalType?this.modalTitle="Delete":"editTimelineTitle"===this.modalType&&(document.getElementById("title-input").focus(),this.modalTitle="Edit",this.newTimelineTitle=this.title)},modalClosed:function(){"createEvent"===this.modalType?(this.newEventTitle="",this.newEventDescription="",this.exactDateTime=!1,this.showTitleWarning=!1,this.beforeAfterSelect=null,this.eventSelect=null,this.newEventDateTime=null,this.$refs.events.clearSelected()):"editTimelineTitle"===this.modalType&&(this.newTimelineTitle="",this.showTitleWarning=!1),this.modalType="",this.modalTitle=""},createEvent:function(){var e=this;if(!H(this.newEventTitle))return document.getElementById("title-input").focus(),void(this.showTitleWarning=!0);if(this.exactDateTime){if(null===this.newEventDateTime){var t=document.getElementById("newEventDateTime");return t.focus(),void(t.style.border="1px solid red")}}else{if(null===this.beforeAfterSelect){var n=document.getElementById("beforeAfterSelect");return n.focus(),void(n.style.border="1px solid red")}if(null===this.eventSelect){var i=document.getElementById("eventSelect");return i.focus(),void(i.style.border="1px solid red")}}this.closeModal();var l={title:this.newEventTitle,description:this.newEventDescription};this.exactDateTime?(l.dateTime=this.newEventDateTime,this.$store.dispatch("createEventExact",l)):(l.beforeAfter=this.beforeAfterSelect,l.eventId=this.eventSelect,l.dateTime=this.events.filter(function(t){return t.Id===e.eventSelect})[0].EventDateTime,this.$store.dispatch("createEventBA",l))},checkTitleInput:function(){!0===this.showTitleWarning&&H(this.newEventTitle)&&(this.showTitleWarning=!1)},checkInput:function(e){var t=document.getElementById(e);"1px solid red"===t.style.border&&(t.style.border="")},changeTimelineTitle:function(){if(!H(this.newTimelineTitle))return document.getElementById("title-input").focus(),void(this.showTitleWarning=!0);this.closeModal();var e={id:this.timeline.id,title:this.newTimelineTitle};this.$store.dispatch("changeTimelineTitle",e)}}},Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!=e.timeline?n("div",[n("div",{staticClass:"timeline"},[n("b-row",{staticClass:"head",attrs:{"align-v":"start"}},[n("b-col",{staticClass:"timeline-buttons",attrs:{sm:"12",lg:"2"}},[n("b-btn",{attrs:{variant:"select",id:"timeline-back-button"},on:{click:e.back}},[e._v("Back")])],1),n("b-col",{staticClass:"timeline-details",attrs:{sm:"12",lg:"6"}},[n("h1",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.openModal("editTimelineTitle")}}},[e._v(e._s(e.title))]),n("h3",[e._v(e._s(e.date))])]),n("b-col",{staticClass:"timeline-buttons",attrs:{sm:"6",lg:"2"}},[n("b-btn",{attrs:{variant:"delete",id:"timeline-delete-button"},on:{click:function(t){e.openModal("deleteTimeline")}}},[e._v("Delete timeline")])],1),n("b-col",{staticClass:"timeline-buttons",attrs:{sm:"6",lg:"2",id:"timeline-create-div"}},[n("b-btn",{staticStyle:{float:"right"},attrs:{variant:"create",id:"timeline-create-button"},on:{click:function(t){e.openModal("createEvent")}}},[e._v("Create new event")])],1)],1),n("b-row",{attrs:{"align-v":"center"}},[n("a-events",{ref:"events",attrs:{events:e.events}})],1)],1),n("b-modal",{attrs:{title:e.modalTitle,size:"lg",id:"timeline-modal"},on:{shown:e.modalOpened,hidden:e.modalClosed},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("b-container",{attrs:{fluid:""}},["createEvent"===e.modalType?n("b-row",[n("b-col",{staticClass:"modal-half",attrs:{md:"6"}},[n("b-row",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEventTitle,expression:"newEventTitle"}],attrs:{type:"text",placeholder:"Enter title",id:"title-input"},domProps:{value:e.newEventTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.createEvent(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newEventTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning,id:"title-alert"}},[e._v("Title must be at least 5 characters long")])],1),n("b-row",[n("b-form-textarea",{attrs:{id:"description-input",placeholder:"Enter description",rows:8,"no-resize":""},model:{value:e.newEventDescription,callback:function(t){e.newEventDescription=t},expression:"newEventDescription"}})],1)],1),n("b-col",{staticClass:"modal-half",attrs:{md:"6"}},[n("b-row",{attrs:{id:"checkBoxCol"}},[n("b-form-checkbox",{attrs:{id:"exactDateTime"},model:{value:e.exactDateTime,callback:function(t){e.exactDateTime=t},expression:"exactDateTime"}},[e._v("Exact date and time")])],1),e.exactDateTime?e._e():n("b-row",[n("b-form-select",{staticClass:"mb-3",attrs:{options:e.beforeAfterOptions,id:"beforeAfterSelect"},on:{change:function(t){e.checkInput("beforeAfterSelect")}},model:{value:e.beforeAfterSelect,callback:function(t){e.beforeAfterSelect=t},expression:"beforeAfterSelect"}}),n("b-form-select",{staticClass:"mb-3",attrs:{options:e.eventOptions,id:"eventSelect"},on:{change:function(t){e.checkInput("eventSelect")}},model:{value:e.eventSelect,callback:function(t){e.eventSelect=t},expression:"eventSelect"}})],1),e.exactDateTime?n("b-row",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEventDateTime,expression:"newEventDateTime"}],attrs:{type:"datetime-local",id:"newEventDateTime"},domProps:{value:e.newEventDateTime},on:{change:function(t){e.checkInput("newEventDateTime")},input:function(t){t.target.composing||(e.newEventDateTime=t.target.value)}}})]):e._e()],1)],1):"deleteTimeline"===e.modalType?n("b-row",[n("b-col",[n("p",[e._v("\n              Are you sure you wish to delete this timeline?\n            ")])])],1):"editTimelineTitle"===e.modalType?n("b-row",[n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newTimelineTitle,expression:"newTimelineTitle"}],attrs:{type:"text",placeholder:"Enter new title",id:"title-input"},domProps:{value:e.newTimelineTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.changeTimelineTitle(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newTimelineTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning}},[e._v("Title must be at least 5 characters long")])],1)],1):e._e()],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{staticClass:"float-left",on:{click:e.closeModal}},[e._v("CANCEL")]),"createEvent"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.createEvent}},[e._v("CREATE")]):"deleteTimeline"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.deleteTimeline}},[e._v("DELETE")]):"editTimelineTitle"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.changeTimelineTitle}},[e._v("SAVE")]):e._e()],1)],1)],1):n("div",[n("h2",[e._v("\n      No timeline selected. Click "),n("router-link",{attrs:{to:"/"}},[e._v("here")]),e._v(" to return to timeline register.\n    ")],1)])])},xe=[];function Se(e){n("dLvY")}var Le=!1,$e=Se,Me=null,We=null,Be=Object(s["a"])(De,Ae,xe,Le,$e,Me,We),Oe=Be.exports,Ne={name:"aTimeline",data:function(){return{newEventDescription:"",modal:!1,modalTitle:"",showTitleWarning:!1,modalType:"",newEventTitle:"",selectedAttachmentId:""}},mounted:function(){this.newEventDescription=this.description},computed:{timeline:function(){return this.$store.state.currentTimeline},event:function(){return this.$store.state.currentEvent},id:function(){return this.event.Id},title:function(){return this.event.Title},date:function(){var e=F(this.event.EventDateTime);return"Date not available"===e?"":e},time:function(){var e=R(this.event.EventDateTime);return"Time not available"===e?"":e},description:function(){return this.event.Description},attachments:function(){return this.event.Attachments}},methods:{back:function(){this.$router.push({name:"TIMELINE"})},cancelDescription:function(){this.newEventDescription=this.description},saveDescription:function(){var e={id:this.id,description:this.newEventDescription};this.$store.dispatch("changeEventDescription",e)},openModal:function(e){this.modal=!0,this.modalType=e},closeModal:function(){this.modal=!this.modal},modalOpened:function(){"editEventTitle"===this.modalType?(document.getElementById("title-input").focus(),this.modalTitle="Edit",this.newEventTitle=this.title):"createAttachment"===this.modalType?this.modalTitle="Create":"deleteAttachment"===this.modalType&&(this.modalTitle="Delete")},modalClosed:function(){"editEventTitle"===this.modalType&&(this.newEventTitle="",this.showTitleWarning=!1),this.modalType="",this.modalTitle=""},checkTitleInput:function(){!0===this.showTitleWarning&&("editEventTitle"===this.modalType?H(this.newEventTitle)&&(this.showTitleWarning=!1):"createAttachment"===this.modalType&&H(this.newAttachmentTitle)&&(this.showTitleWarning=!1))},changeEventTitle:function(){if(!H(this.newEventTitle))return document.getElementById("title-input").focus(),void(this.showTitleWarning=!0);this.closeModal();var e={id:this.id,title:this.newEventTitle};this.$store.dispatch("changeEventTitle",e)},createAttachment:function(){var e=document.getElementById("newAttachmentInput"),t=e.files[0];""!==t&&(this.closeModal(),this.$store.dispatch("createAttachment",t))},clickedAttachment:function(e){if(e.target.classList.contains("selected")&&2!==e.button)this.clearSelected();else if(this.clearSelected(),e.target.classList.add("selected"),this.selectedAttachmentId=e.target.children[0].id,2===e.button){var t=document.getElementById("contextmenu");t.style.display="inherit",t.style.top=e.clientY+"px",t.style.left=e.clientX+"px",t.onmouseleave=function(){t.style.display="none"}}},clearSelected:function(){for(var e=document.getElementsByClassName("selected"),t=e.length-1;t>=0;t--)e[0].classList.remove("selected");this.selectedAttachmentId=""},deleteAttachment:function(){this.closeModal(),this.$store.dispatch("deleteAttachment",this.selectedAttachmentId),this.clearSelected()},openAttachment:function(){this.$store.dispatch("getAttachment",this.selectedAttachmentId)}}},Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!=e.event?n("div",[n("b-row",[n("b-col",{staticClass:"event-page",attrs:{md:"10","offset-md":"1",id:"event-page"}},[n("b-row",{staticClass:"event-head",attrs:{"align-v":"start"}},[n("b-col",{staticClass:"event-buttons",attrs:{sm:"12",lg:"2"}},[n("b-btn",{attrs:{variant:"select",id:"event-back-button"},on:{click:e.back}},[e._v("Back")])],1),n("b-col",{staticClass:"event-details",attrs:{sm:"12",lg:"8"}},[n("h1",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.openModal("editEventTitle")}}},[e._v(e._s(e.title))]),n("h3",[e._v(e._s(e.date)+" - "+e._s(e.time))])]),n("b-col",{staticClass:"event-buttons",attrs:{sm:"12",lg:"2"}},[n("b-btn",{attrs:{variant:"delete",id:"event-delete-button"},on:{click:function(t){e.openModal("deleteEvent")}}},[e._v("Delete event")])],1)],1),n("b-row",{staticClass:"event-main",attrs:{"align-v":"center"}},[n("b-col",{attrs:{sm:"12"}},[n("b-row",[n("b-col",{staticClass:"description",attrs:{sm:"12"}},[n("h1",[e._v("Description")]),n("span",{attrs:{id:"controls"}},[e.description!==e.newEventDescription?n("b-btn",{attrs:{id:"cancel-description",variant:"cancel-edit"},on:{click:e.cancelDescription}},[e._v("Cancel")]):e._e(),e.description!==e.newEventDescription?n("b-btn",{attrs:{id:"save-description",variant:"save"},on:{click:e.saveDescription}},[e._v("Save")]):e._e()],1),n("b-form-textarea",{staticStyle:{cursor:"pointer"},attrs:{id:"event-description",placeholder:"Enter description","no-resize":""},model:{value:e.newEventDescription,callback:function(t){e.newEventDescription=t},expression:"newEventDescription"}})],1)],1),n("b-row",[n("b-col",{staticClass:"attachments",attrs:{sm:"12",md:"6"}},[n("h1",[e._v("Attachments")]),n("ul",{attrs:{id:"attachment-list"}},e._l(e.attachments,function(t){return n("li",{key:t.Id,on:{click:function(t){e.clickedAttachment(t)},contextmenu:function(t){t.preventDefault(),e.clickedAttachment(t)}}},[n("span",{attrs:{id:t.Id}},[e._v(e._s(t.Title))])])})),n("span",{attrs:{id:"controls"}},[n("b-btn",{attrs:{id:"delete-attachment",variant:"delete",disabled:""===e.selectedAttachmentId},on:{click:function(t){e.openModal("deleteAttachment")}}},[e._v("Delete")]),n("b-btn",{attrs:{id:"create-attachment",variant:"create"},on:{click:function(t){e.openModal("createAttachment")}}},[e._v("Create")])],1)])],1)],1)],1)],1)],1),n("div",{attrs:{id:"contextmenu"}},[n("ul",[n("li",{on:{click:e.openAttachment}},[e._v("Open")]),n("li",{on:{click:function(t){e.openModal("deleteAttachment")}}},[e._v("Delete")])])]),n("b-modal",{attrs:{title:e.modalTitle,size:"lg",id:"timeline-modal"},on:{shown:e.modalOpened,hidden:e.modalClosed},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("b-container",{attrs:{fluid:""}},["editEventTitle"===e.modalType?n("b-row",[n("b-col",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEventTitle,expression:"newEventTitle"}],attrs:{type:"text",placeholder:"Enter new title",id:"title-input"},domProps:{value:e.newEventTitle},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.changeEventTitle(t)},e.checkTitleInput],input:function(t){t.target.composing||(e.newEventTitle=t.target.value)}}}),n("b-alert",{attrs:{variant:"danger",show:e.showTitleWarning}},[e._v("Title must be at least 5 characters long")])],1)],1):"createAttachment"===e.modalType?n("b-row",[n("input",{attrs:{type:"file",id:"newAttachmentInput"}})]):"deleteAttachment"===e.modalType?n("b-row",[n("b-col",[n("p",[e._v("\n              Are you sure you wish to delete this attachment?\n            ")])])],1):e._e()],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{staticClass:"float-left",on:{click:e.closeModal}},[e._v("CANCEL")]),"editEventTitle"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.changeEventTitle}},[e._v("SAVE")]):"createAttachment"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.createAttachment}},[e._v("Create")]):"deleteAttachment"===e.modalType?n("b-btn",{staticClass:"float-right",on:{click:e.deleteAttachment}},[e._v("Delete")]):e._e()],1)],1)],1):n("div",[null!=e.timeline?n("div",[n("h2",[e._v("\n        No event selected. Click "),n("router-link",{attrs:{to:"/timeline"}},[e._v("here")]),e._v(" to return to timeline.\n      ")],1)]):n("div",[n("h2",[e._v("\n        No event or timeline selected. Click "),n("router-link",{attrs:{to:"/"}},[e._v("here")]),e._v(" to return to timeline register.\n      ")],1)])])])},Pe=[];function je(e){n("tE50")}var Re=!1,Fe=je,He=null,Ue=null,ze=Object(s["a"])(Ne,Ve,Pe,Re,Fe,He,Ue),Ye=ze.exports,Ge=[{name:"REGISTER",path:"/",component:ue},{name:"TIMELINE",path:"/timeline",component:Oe},{name:"EVENT",path:"/event",component:Ye}],Ke=new D["a"]({mode:"history",routes:Ge}),Xe=Ke,Qe=(n("MfeA"),n("mtWM")),qe=n.n(Qe);function Je(){return Ze()+Ze()+"-"+Ze()+"-"+Ze()+"-"+Ze()+"-"+Ze()+Ze()+Ze()}function Ze(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function et(e,t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result)},n.onerror=function(e){console.log(e)}}function tt(e,t,n){return n=n||(e.match(/^data:([^;]+);/)||"")[1],fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:n})})}function nt(){var e=qe.a.get("https://gcu.ideagen-development.com/Timeline/GetAllTimelinesAndEvent",{headers:{TenantId:"Team19",AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147"}}).catch(function(e){console.log(e)});return e}function it(e){var t=qe.a.put("https://gcu.ideagen-development.com/Timeline/Create",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",Title:e,TimelineId:Je()}).catch(function(e){console.log(e)});return t}function lt(e){var t=qe.a.put("https://gcu.ideagen-development.com/Timeline/Delete",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineId:e}).catch(function(e){console.log(e)});return t}function at(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/Timeline/EditTitle",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",Title:t,TimelineId:e}).catch(function(e){console.log(e)});return n}function ot(e){var t=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/Create",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineEventId:Je(),Title:e.title,Description:e.description,EventDateTime:e.dateTime}).catch(function(e){console.log(e)});return t}function ct(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/Timeline/LinkEvent",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineId:t,EventId:e}).catch(function(e){console.log(e)});return n}function st(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/Timeline/UnlinkEvent",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",EventId:e,TimelineId:t}).catch(function(e){console.log(e)});return n}function rt(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/LinkEvents",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineEventId:e,LinkedToTimelineEventId:t}).catch(function(e){console.log(e)});return n}function dt(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/UnlinkEvents",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineEventId:e,UnlinkedFromTimelineEventId:t}).catch(function(e){console.log(e)});return n}function ut(e){var t=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/Delete",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",TimelineEventId:e}).catch(function(e){console.log(e)});return t}function mt(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/EditTitle",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",Title:t,TimelineEventId:e}).catch(function(e){console.log(e)});return n}function vt(e,t){var n=qe.a.put("https://gcu.ideagen-development.com/TimelineEvent/EditDescription",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",Description:t,TimelineEventId:e}).catch(function(e){console.log(e)});return n}function ht(e){var t=qe.a.put("https://gcu.ideagen-development.com/TimelineEventAttachment/Create",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",AttachmentId:Je(),Title:e.title,TimelineEventId:e.eventId}).catch(function(e){console.log(e)});return t}function ft(e){var t=qe.a.put("https://gcu.ideagen-development.com/TimelineEventAttachment/Delete",{AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",TenantId:"Team19",AttachmentId:e}).catch(function(e){console.log(e)});return t}function Tt(e){var t=qe.a.get("https://gcu.ideagen-development.com/TimelineEventAttachment/GenerateUploadPresignedUrl",{headers:{TenantId:"Team19",AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",AttachmentId:e}}).catch(function(e){console.log(e)});return t}function pt(e){var t=qe.a.get("https://gcu.ideagen-development.com/TimelineEventAttachment/GenerateGetPresignedUrl",{headers:{TenantId:"Team19",AuthToken:"7cbc5c61-bcfa-47d8-a171-599616102147",AttachmentId:e}}).catch(function(e){console.log(e)});return t}function Et(e){var t="";return new Promise(function(n,i){et(function(l){t=l,qe.a.put(e.url,t).then(function(e){n(e)}).catch(function(e){console.log(e),i(e)})},e.file)})}function gt(e,t){return new Promise(function(n,i){qe.a.get(t).then(function(t){var i=t.data;tt(i,e).then(function(e){n(e)})}).catch(function(e){console.log(e),i(e)})})}var bt=n("lDdF"),wt=n.n(bt);l.a.use(C["a"]),l.a.use(D["a"]),l.a.use(A["a"]),l.a.config.productionTip=!1;var It=[],kt=new A["a"].Store({state:{timelines:It,currentTimeline:null,currentEvent:null},mutations:{addTimeline:function(e,t){e.timelines.push(t)},addEvent:function(e,t){e.currentTimeline.timelineEvents.push(t)},removeTimeline:function(e,t){for(var n=0;n<e.timelines.length;n++)if(e.timelines[n].id===t)return e.timelines.splice(n,1),void(null!=e.currentTimeline&&e.currentTimeline.id===t&&(e.currentTimeline=null))},setCurrentTimeline:function(e,t){e.currentTimeline=t},clearCurrentTimeline:function(e){e.currentTimeline=null},setCurrentEvent:function(e,t){e.currentEvent=t},clearCurrentEvent:function(e){e.currentEvent=null},updateTimelineTitle:function(e,t){for(var n=0;n<e.timelines.length;n++)if(e.timelines[n].id===t.id)return e.timelines[n].title=t.title,void(t.id===e.currentTimeline.id&&(e.currentTimeline.title=t.title))},removeEvent:function(e,t){for(var n=0;n<e.currentTimeline.timelineEvents.length;n++)if(e.currentTimeline.timelineEvents[n].Id===t)return e.currentTimeline.timelineEvents.splice(n,1),void(null!=e.currentEvent&&e.currentEvent.Id===t&&(e.currentEvent=null))},updateEventTitle:function(e,t){for(var n=0;n<e.currentTimeline.timelineEvents.length;n++)if(e.currentTimeline.timelineEvents[n].Id===t.id)return e.currentTimeline.timelineEvents[n].Title=t.title,void(t.id===e.currentEvent.Id&&(e.currentEvent.Title=t.title))},updateEventDescription:function(e,t){for(var n=0;n<e.currentTimeline.timelineEvents.length;n++)if(e.currentTimeline.timelineEvents[n].Id===t.id)return e.currentTimeline.timelineEvents[n].Description=t.description,void(t.id===e.currentEvent.Id&&(e.currentEvent.Description=t.description))},addAttachment:function(e,t){e.currentEvent.Attachments.push(t)},removeAttachment:function(e,t){for(var n=0;n<e.currentEvent.Attachments.length;n++)if(e.currentEvent.Attachments[n].Id===t)return void e.currentEvent.Attachments.splice(n,1)}},actions:{createTimeline:function(e,t){var n=e.commit;return new Promise(function(e){it(t).then(function(t){var i=t.data,l={title:i.Title,date:i.CreationTimeStamp,isDeleted:i.IsDeleted,id:i.Id,selected:!1,_rowVariant:"",timelineEvents:[]};n("addTimeline",l),e(l)})})},deleteTimeline:function(e,t){var n=e.commit;lt(t).then(function(){n("removeTimeline",t)})},deleteSelectedTimelines:function(e){var t=e.state;t.timelines.filter(function(e){return e.selected}).forEach(function(e){this.dispatch("deleteTimeline",e.id)},this)},changeTimelineTitle:function(e,t){var n=e.commit,i=t.id,l=t.title;at(i,l).then(function(){n("updateTimelineTitle",{id:i,title:l})})},createEventExact:function(e,t){var n=e.state,i=e.commit,l={};ot(t).then(function(e){l=e.data,l.LinkedTimelineEventIds=[],ct(l.Id,n.currentTimeline.id).then(function(){i("addEvent",l)})})},createEventBA:function(e,t){var n=e.state,i=e.commit,l={};ot(t).then(function(e){l=e.data,ct(l.Id,n.currentTimeline.id).then(function(){if("before"===t.beforeAfter){var e=n.currentTimeline.timelineEvents.map(function(e){if(null!=e.LinkedTimelineEventIds&&null!=e.LinkedTimelineEventIds[0])return e.LinkedTimelineEventIds[0]}).indexOf(t.eventId);-1!=e&&(dt(n.currentTimeline.timelineEvents[e].Id,t.eventId),rt(n.currentTimeline.timelineEvents[e].Id,l.Id),n.currentTimeline.timelineEvents[e].LinkedTimelineEventIds[0]=l.Id),rt(l.Id,t.eventId).then(function(){l.LinkedTimelineEventIds=[],l.LinkedTimelineEventIds.push(t.eventId),i("addEvent",l)})}else if("after"===t.beforeAfter){var a=n.currentTimeline.timelineEvents.map(function(e){return e.Id}).indexOf(t.eventId),o=n.currentTimeline.timelineEvents[a];null!=o.LinkedTimelineEventIds&&null!=o.LinkedTimelineEventIds[0]&&(rt(l.Id,o.LinkedTimelineEventIds[0]),dt(o.Id,o.LinkedTimelineEventIds[0]),l.LinkedTimelineEventIds=[],l.LinkedTimelineEventIds.push(o.LinkedTimelineEventIds[0])),rt(o.Id,l.Id).then(function(){o.LinkedTimelineEventIds=[],o.LinkedTimelineEventIds.push(l.Id),i("addEvent",l)})}})})},deleteEvent:function(e,t){var n=e.state,i=e.commit,l=n.currentTimeline.timelineEvents.map(function(e){if(null!=e.LinkedTimelineEventIds&&null!=e.LinkedTimelineEventIds[0])return e.LinkedTimelineEventIds[0]}).indexOf(t),a=n.currentTimeline.timelineEvents.filter(function(e){return e.Id===t})[0],o="";null!=a.LinkedTimelineEventIds&&null!=a.LinkedTimelineEventIds[0]&&(o=a.LinkedTimelineEventIds[0]),-1!=l&&dt(n.currentTimeline.timelineEvents[l].Id,t).then(function(){""!=o?(rt(n.currentTimeline.timelineEvents[l].Id,o),n.currentTimeline.timelineEvents[l].LinkedTimelineEventIds[0]=o):n.currentTimeline.timelineEvents[l].LinkedTimelineEventIds[0].slice(0,1)}),ut(t).then(function(){st(t,n.currentTimeline.id).then(function(){i("removeEvent",t)})})},changeEventTitle:function(e,t){var n=e.commit,i=t.id,l=t.title;mt(i,l).then(function(){n("updateEventTitle",{id:i,title:l})})},changeEventDescription:function(e,t){var n=e.commit,i=t.id,l=t.description;vt(i,l).then(function(){n("updateEventDescription",{id:i,description:l})})},createAttachment:function(e,t){var n=e.state,i=e.commit,l={};ht({title:t.name,eventId:n.currentEvent.Id}).then(function(e){l=e.data,Tt(l.Id).then(function(e){Et({file:t,url:e.data}).then(function(){i("addAttachment",l)})})})},deleteAttachment:function(e,t){var n=e.commit;ft(t).then(function(){n("removeAttachment",t)})},getAttachment:function(e,t){var n=e.state;pt(t).then(function(e){var i=e.data,l=n.currentEvent.Attachments.filter(function(e){return e.Id===t})[0].Title;gt(l,i).then(function(e){wt.a.saveAs(e)})})}},getters:{selectedTimelines:function(e){return e.timelines.filter(function(e){return e.selected})}},plugins:[Object(x["a"])({paths:["currentTimeline","currentEvent"]})]});new l.a({render:function(e){return e(_)},router:Xe,store:kt,methods:{fetchTimelines:function(){var e=this;It.splice(0,It.length);var t=nt();t.then(function(t){for(var n=0;n<t.data.Timelines.length;n++){var i=t.data.Timelines[n],l={title:i.Title,date:i.CreationTimeStamp,isDeleted:i.isDeleted,id:i.Id,timelineEvents:i.TimelineEvents,selected:!1,_rowVariant:""};It.push(l)}e.updateCurrentTimeline(),e.updateCurrentEvent()})},updateCurrentTimeline:function(){if(null!==this.$store.state.currentTimeline&&null!==this.$store.state.timelines&&null!==this.$store.state.timelines[0]){var e=this.$store.state.timelines.map(function(e){return e.id}).indexOf(this.$store.state.currentTimeline.id);-1===e?this.$store.commit("clearCurrentTimeline"):this.$store.commit("setCurrentTimeline",this.$store.state.timelines[e])}},updateCurrentEvent:function(){if(null!==this.$store.state.currentEvent&&null!==this.$store.state.currentTimeline&&null!==this.$store.state.currentTimeline.timelineEvents&&null!==this.$store.state.currentTimeline.timelineEvents[0]){var e=this.$store.state.currentTimeline.timelineEvents.map(function(e){return e.Id}).indexOf(this.$store.state.currentEvent.Id);-1===e?this.$store.commit("clearCurrentEvent"):this.$store.commit("setCurrentEvent",this.$store.state.currentTimeline.timelineEvents[e])}}},mounted:function(){this.fetchTimelines()}}).$mount("#app")},Q6DT:function(e,t){},SoWc:function(e,t){},dLvY:function(e,t){},iQH9:function(e,t,n){e.exports=n.p+"img/logo.2847cb02.png"},tE50:function(e,t){},vNef:function(e,t){},zj2Q:function(e,t){}},[0]);
//# sourceMappingURL=app.2e3b29de.js.map